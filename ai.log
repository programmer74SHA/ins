2026-01-19 11:44:16,102 p=1294644 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 11:44:16,113 p=1294644 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 11:44:19,718 p=1294644 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:44:19,726 p=1294644 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 11:44:20,203 p=1294644 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:44:20,220 p=1294644 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 11:44:20,449 p=1294644 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:44:20,454 p=1294644 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 11:44:20,683 p=1294644 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:44:20,688 p=1294644 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 11:44:20,971 p=1294644 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:44:20,980 p=1294644 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 11:44:21,235 p=1294644 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:44:21,255 p=1294644 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 11:44:21,331 p=1294644 u=root n=ansible ERROR| [ERROR]: Task failed: Unexpected AnsibleActionFail error: Could not find or access './infra_config/haproxy/'
Searched in:
	/data/develop/git/installer/roles/deploy_smart_analyzer/files/./infra_config/haproxy/
	/data/develop/git/installer/roles/deploy_smart_analyzer/./infra_config/haproxy/
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/files/./infra_config/haproxy/
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/./infra_config/haproxy/
	/data/develop/git/installer/files/./infra_config/haproxy/
	/data/develop/git/installer/./infra_config/haproxy/ on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:34:3

32     mode: '0755'
33
34 - name: Copy haproxy configuration files
     ^ column 3


2026-01-19 11:44:21,332 p=1294644 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Unexpected AnsibleActionFail error: Could not find or access './infra_config/haproxy/'\nSearched in:\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/files/./infra_config/haproxy/\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/./infra_config/haproxy/\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/files/./infra_config/haproxy/\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/./infra_config/haproxy/\n\t/data/develop/git/installer/files/./infra_config/haproxy/\n\t/data/develop/git/installer/./infra_config/haproxy/ on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2026-01-19 11:44:21,332 p=1294644 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 11:44:21,333 p=1294644 u=root n=ansible INFO| ai-server-01               : ok=6    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 11:45:50,057 p=1297846 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 11:45:50,066 p=1297846 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 11:45:52,615 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:52,620 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 11:45:53,097 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:53,112 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 11:45:53,397 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:53,403 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 11:45:53,641 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:53,648 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 11:45:53,920 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:53,934 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 11:45:54,190 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:54,204 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 11:45:54,844 p=1297846 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:45:54,861 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 11:45:55,227 p=1297846 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 11:45:55,235 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 11:45:56,062 p=1297846 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 11:45:56,077 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 11:45:56,108 p=1297846 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-19 11:45:56,114 p=1297846 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Load docker images] *******************************************************************
2026-01-19 11:45:56,144 p=1297846 u=root n=ansible ERROR| [ERROR]: conflicting action statements: hosts, tasks
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/load-docker-images.yml:2:3

1 ---
2 - name: Load Docker images from tar.gz files with version tags
    ^ column 3


2026-01-19 13:29:54,739 p=1500188 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:29:54,750 p=1500188 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:30:06,412 p=1500188 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:30:06,420 p=1500188 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:30:06,902 p=1500188 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:30:06,911 p=1500188 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:30:07,177 p=1500188 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:30:07,184 p=1500188 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:30:07,417 p=1500188 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:30:07,423 p=1500188 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:30:07,743 p=1500188 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:30:07,767 p=1500188 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:30:08,142 p=1500188 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:30:08,174 p=1500188 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:30:08,275 p=1500188 u=root n=ansible ERROR| [ERROR]: Task failed: Unexpected AnsibleActionFail error: Could not find or access './infra_config/haproxy/'
Searched in:
	/data/develop/git/installer/roles/deploy_smart_analyzer/files/./infra_config/haproxy/
	/data/develop/git/installer/roles/deploy_smart_analyzer/./infra_config/haproxy/
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/files/./infra_config/haproxy/
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/./infra_config/haproxy/
	/data/develop/git/installer/files/./infra_config/haproxy/
	/data/develop/git/installer/./infra_config/haproxy/ on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:34:3

32     mode: '0755'
33
34 - name: Copy haproxy configuration files
     ^ column 3


2026-01-19 13:30:08,275 p=1500188 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Unexpected AnsibleActionFail error: Could not find or access './infra_config/haproxy/'\nSearched in:\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/files/./infra_config/haproxy/\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/./infra_config/haproxy/\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/files/./infra_config/haproxy/\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/./infra_config/haproxy/\n\t/data/develop/git/installer/files/./infra_config/haproxy/\n\t/data/develop/git/installer/./infra_config/haproxy/ on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2026-01-19 13:30:08,278 p=1500188 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:30:08,279 p=1500188 u=root n=ansible INFO| ai-server-01               : ok=6    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:38:47,922 p=1517976 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:38:47,932 p=1517976 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:38:59,432 p=1517976 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:38:59,436 p=1517976 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:38:59,872 p=1517976 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:38:59,883 p=1517976 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:39:00,117 p=1517976 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:39:00,124 p=1517976 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:39:00,375 p=1517976 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:39:00,389 p=1517976 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:39:00,708 p=1517976 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:39:00,723 p=1517976 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:39:01,027 p=1517976 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:39:01,034 p=1517976 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:39:01,116 p=1517976 u=root n=ansible ERROR| [ERROR]: Task failed: Unexpected AnsibleActionFail error: Could not find or access './infra_config/haproxy/haproxy.cfg'
Searched in:
	/data/develop/git/installer/roles/deploy_smart_analyzer/files/./infra_config/haproxy/haproxy.cfg
	/data/develop/git/installer/roles/deploy_smart_analyzer/./infra_config/haproxy/haproxy.cfg
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/files/./infra_config/haproxy/haproxy.cfg
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/./infra_config/haproxy/haproxy.cfg
	/data/develop/git/installer/files/./infra_config/haproxy/haproxy.cfg
	/data/develop/git/installer/./infra_config/haproxy/haproxy.cfg on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:34:3

32     mode: '0755'
33
34 - name: Copy haproxy configuration files
     ^ column 3


2026-01-19 13:39:01,117 p=1517976 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Unexpected AnsibleActionFail error: Could not find or access './infra_config/haproxy/haproxy.cfg'\nSearched in:\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/files/./infra_config/haproxy/haproxy.cfg\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/./infra_config/haproxy/haproxy.cfg\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/files/./infra_config/haproxy/haproxy.cfg\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/./infra_config/haproxy/haproxy.cfg\n\t/data/develop/git/installer/files/./infra_config/haproxy/haproxy.cfg\n\t/data/develop/git/installer/./infra_config/haproxy/haproxy.cfg on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2026-01-19 13:39:01,118 p=1517976 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:39:01,118 p=1517976 u=root n=ansible INFO| ai-server-01               : ok=6    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:41:40,215 p=1523985 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:41:40,224 p=1523985 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:41:51,794 p=1523985 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:41:51,800 p=1523985 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:41:52,289 p=1523985 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:41:52,305 p=1523985 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:41:52,552 p=1523985 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:41:52,558 p=1523985 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:41:52,823 p=1523985 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:41:52,838 p=1523985 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:41:53,140 p=1523985 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:41:53,145 p=1523985 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:41:53,412 p=1523985 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:41:53,427 p=1523985 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:41:54,298 p=1523985 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: Destination directory ./infra_config/haproxy does not exist
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:35:3

33
34
35 - name: Copy haproxy configuration files
     ^ column 3


2026-01-19 13:41:54,298 p=1523985 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "checksum": "edd1105a808584a08b3aebfd2743c47b4e4f51cc", "msg": "Destination directory ./infra_config/haproxy does not exist"}
2026-01-19 13:41:54,299 p=1523985 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:41:54,300 p=1523985 u=root n=ansible INFO| ai-server-01               : ok=6    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:43:53,100 p=1528440 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:43:53,108 p=1528440 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:44:05,685 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:05,691 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:44:06,165 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:06,180 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:44:06,423 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:06,428 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:44:06,664 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:06,668 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:44:06,910 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:06,915 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:44:07,170 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:07,180 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:44:07,992 p=1528440 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 13:44:08,007 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:44:08,601 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:08,610 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:44:08,948 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:08,954 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:44:09,420 p=1528440 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:44:09,435 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:44:09,454 p=1528440 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-19 13:44:09,464 p=1528440 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Display deployment information] *******************************************************
2026-01-19 13:44:09,490 p=1528440 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Smart Analyzer has been deployed successfully!",
        "AI Service is accessible at: http://172.25.7.99:2181",
        "Qdrant is accessible at: http://172.25.7.99:6333",
        "HAProxy is accessible at: http://172.25.7.99:5002"
    ]
}
2026-01-19 13:44:09,496 p=1528440 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:44:09,496 p=1528440 u=root n=ansible INFO| ai-server-01               : ok=11   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2026-01-19 13:46:48,379 p=1534415 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:46:48,388 p=1534415 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:46:59,951 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:46:59,958 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:47:00,400 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:00,416 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:47:00,708 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:00,714 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:47:00,963 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:00,973 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:47:01,236 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:01,243 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:47:01,484 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:01,492 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:47:02,209 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:02,221 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:47:02,806 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:02,820 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:47:03,186 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:03,201 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:47:03,642 p=1534415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:47:03,647 p=1534415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:47:03,737 p=1534415 u=root n=ansible ERROR| [ERROR]: Task failed: 'smart_analyzer_splunk_time_field' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

'smart_analyzer_splunk_time_field' is undefined
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2


2026-01-19 13:47:03,739 p=1534415 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: 'smart_analyzer_splunk_time_field' is undefined"}
2026-01-19 13:47:03,743 p=1534415 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:47:03,743 p=1534415 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:48:45,864 p=1538415 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:48:45,873 p=1538415 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:48:58,380 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:48:58,384 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:48:58,823 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:48:58,837 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:48:59,097 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:48:59,113 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:48:59,390 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:48:59,405 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:48:59,656 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:48:59,671 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:48:59,935 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:48:59,952 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:49:00,608 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:49:00,612 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:49:01,219 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:49:01,236 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:49:01,557 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:49:01,568 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:49:01,993 p=1538415 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:49:02,009 p=1538415 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:49:02,102 p=1538415 u=root n=ansible ERROR| [ERROR]: Task failed: 'smart_analyzer_splunk_time_field' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

'smart_analyzer_splunk_time_field' is undefined
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2


2026-01-19 13:49:02,102 p=1538415 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: 'smart_analyzer_splunk_time_field' is undefined"}
2026-01-19 13:49:02,103 p=1538415 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:49:02,103 p=1538415 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:51:20,468 p=1543504 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:51:20,477 p=1543504 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:51:32,973 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:32,980 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:51:33,396 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:33,401 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:51:33,699 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:33,710 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:51:33,996 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:34,002 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:51:34,320 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:34,336 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:51:34,608 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:34,614 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:51:35,214 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:35,221 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:51:35,789 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:35,801 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:51:36,113 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:36,129 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:51:36,576 p=1543504 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:51:36,592 p=1543504 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:51:36,689 p=1543504 u=root n=ansible ERROR| [ERROR]: Task failed: 'smart_analyzer_splunk_time_field' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

'smart_analyzer_splunk_time_field' is undefined
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2


2026-01-19 13:51:36,691 p=1543504 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: 'smart_analyzer_splunk_time_field' is undefined"}
2026-01-19 13:51:36,695 p=1543504 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:51:36,696 p=1543504 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:53:02,989 p=1547077 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:53:02,998 p=1547077 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:53:14,439 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:14,444 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:53:14,868 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:14,873 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:53:15,141 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:15,155 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:53:15,384 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:15,389 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:53:15,650 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:15,660 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:53:15,935 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:15,943 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:53:16,583 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:16,588 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:53:17,156 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:17,174 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:53:17,527 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:17,543 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:53:17,980 p=1547077 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:17,985 p=1547077 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:53:18,063 p=1547077 u=root n=ansible ERROR| [ERROR]: Task failed: 'smart_analyzer_splunk_time_field' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

'smart_analyzer_splunk_time_field' is undefined
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2


2026-01-19 13:53:18,064 p=1547077 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: 'smart_analyzer_splunk_time_field' is undefined"}
2026-01-19 13:53:18,065 p=1547077 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:53:18,065 p=1547077 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:53:32,309 p=1548179 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:53:32,317 p=1548179 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:53:43,443 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:43,450 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:53:43,871 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:43,878 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:53:44,106 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:44,111 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:53:44,355 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:44,369 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:53:44,655 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:44,664 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:53:44,928 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:44,939 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:53:45,532 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:45,548 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:53:46,119 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:46,135 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:53:46,478 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:46,491 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:53:46,946 p=1548179 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:53:46,960 p=1548179 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:53:47,047 p=1548179 u=root n=ansible ERROR| [ERROR]: Task failed: 'smart_analyzer_elastic_time_field' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

'smart_analyzer_elastic_time_field' is undefined
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2


2026-01-19 13:53:47,048 p=1548179 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: 'smart_analyzer_elastic_time_field' is undefined"}
2026-01-19 13:53:47,049 p=1548179 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:53:47,049 p=1548179 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:53:58,024 p=1549117 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:53:58,034 p=1549117 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:54:09,196 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:09,202 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:54:09,632 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:09,640 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:54:09,880 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:09,886 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:54:10,134 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:10,150 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:54:10,387 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:10,393 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:54:10,696 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:10,712 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:54:11,368 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:11,374 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:54:11,950 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:11,955 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:54:12,309 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:12,323 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:54:12,771 p=1549117 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:54:12,787 p=1549117 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:54:12,902 p=1549117 u=root n=ansible ERROR| [ERROR]: Task failed: 'smart_analyzer_default_ai_device' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

'smart_analyzer_default_ai_device' is undefined
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2


2026-01-19 13:54:12,902 p=1549117 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: 'smart_analyzer_default_ai_device' is undefined"}
2026-01-19 13:54:12,904 p=1549117 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:54:12,904 p=1549117 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:56:12,774 p=1553886 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:56:12,782 p=1553886 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:56:25,396 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:25,404 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:56:25,848 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:25,857 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:56:26,131 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:26,140 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:56:26,403 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:26,414 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:56:26,661 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:26,667 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:56:26,907 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:26,913 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:56:27,523 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:27,534 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:56:28,152 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:28,167 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:56:28,502 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:28,507 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:56:28,985 p=1553886 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:56:29,000 p=1553886 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:56:29,084 p=1553886 u=root n=ansible ERROR| [ERROR]: Task failed: Could not find or access '.env.j2'
Searched in:
	/data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2
	/data/develop/git/installer/roles/deploy_smart_analyzer/.env.j2
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/templates/.env.j2
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/.env.j2
	/data/develop/git/installer/templates/.env.j2
	/data/develop/git/installer/.env.j2 on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option

Task failed.
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:60:3

58     mode: '0644'
59
60 - name: Template .env file
     ^ column 3

<<< caused by >>>

Could not find or access '.env.j2'
Searched in:
	/data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2
	/data/develop/git/installer/roles/deploy_smart_analyzer/.env.j2
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/templates/.env.j2
	/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/.env.j2
	/data/develop/git/installer/templates/.env.j2
	/data/develop/git/installer/.env.j2 on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option


2026-01-19 13:56:29,085 p=1553886 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Could not find or access '.env.j2'\nSearched in:\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/templates/.env.j2\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/.env.j2\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/templates/.env.j2\n\t/data/develop/git/installer/roles/deploy_smart_analyzer/tasks/.env.j2\n\t/data/develop/git/installer/templates/.env.j2\n\t/data/develop/git/installer/.env.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2026-01-19 13:56:29,086 p=1553886 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:56:29,086 p=1553886 u=root n=ansible INFO| ai-server-01               : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-19 13:56:51,651 p=1555307 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-19 13:56:51,661 p=1555307 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-19 13:57:02,857 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:02,862 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-19 13:57:03,310 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:03,318 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-19 13:57:03,601 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:03,616 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-19 13:57:03,854 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:03,860 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-19 13:57:04,098 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:04,105 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-19 13:57:04,344 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:04,351 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-19 13:57:04,987 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:04,995 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-19 13:57:05,568 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:05,576 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-19 13:57:05,896 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:05,912 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-19 13:57:06,367 p=1555307 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-19 13:57:06,378 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-19 13:57:07,045 p=1555307 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-19 13:57:07,064 p=1555307 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Display deployment information] *******************************************************
2026-01-19 13:57:07,103 p=1555307 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Smart Analyzer has been deployed successfully!",
        "AI Service is accessible at: http://172.25.7.99:2181",
        "Qdrant is accessible at: http://172.25.7.99:6333",
        "HAProxy is accessible at: http://172.25.7.99:5002"
    ]
}
2026-01-19 13:57:07,108 p=1555307 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-19 13:57:07,108 p=1555307 u=root n=ansible INFO| ai-server-01               : ok=12   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 10:22:37,987 p=111191 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:22:38,046 p=111191 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:22:49,694 p=111191 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:22:49,703 p=111191 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:22:49,744 p=111191 u=root n=ansible ERROR| [ERROR]: Task failed: Finalization of task args for 'ansible.builtin.file' failed: Error while resolving value for 'path': 'secret_management_deploy_dir' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/deploy_secret_management/tasks/main.yml:2:3

1 ---
2 - name: Ensure deployment directory exists
    ^ column 3

<<< caused by >>>

Finalization of task args for 'ansible.builtin.file' failed.
Origin: /data/develop/git/installer/roles/deploy_secret_management/tasks/main.yml:3:3

1 ---
2 - name: Ensure deployment directory exists
3   ansible.builtin.file:
    ^ column 3

<<< caused by >>>

Error while resolving value for 'path': 'secret_management_deploy_dir' is undefined
Origin: /data/develop/git/installer/roles/deploy_secret_management/tasks/main.yml:4:11

2 - name: Ensure deployment directory exists
3   ansible.builtin.file:
4     path: "{{ secret_management_deploy_dir }}"
            ^ column 11


2026-01-24 10:22:49,747 p=111191 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: Finalization of task args for 'ansible.builtin.file' failed: Error while resolving value for 'path': 'secret_management_deploy_dir' is undefined"}
2026-01-24 10:22:49,748 p=111191 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:22:49,748 p=111191 u=root n=ansible INFO| ai-server-01               : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-24 10:25:20,056 p=117332 u=root n=ansible ERROR| [ERROR]: The handlers/main.yml file for role 'deploy_secret_management' must contain a list of tasks: {'smart_analyzer_ai_version': '1.0.46', 'smart_analyzer_qdrant_version': '1.14.1', 'smart_analyzer_haproxy_version': 'alpine', 'smart_analyzer_vllm_openai_version': 'latest', 'smart_analyzer_text_embeddings_version': '1.8', 'smart_analyzer_prompt_seeder_version': 'latest'} should be a list or None but is <class 'ansible.module_utils._internal._datatag._AnsibleTaggedDict'>
Origin: /data/develop/git/installer/roles/deploy_secret_management/handlers/main.yml:2:1

1 # Core AI Service
2 smart_analyzer_ai_version: "1.0.46"
  ^ column 1


2026-01-24 10:26:23,731 p=119814 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:26:23,744 p=119814 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:26:35,387 p=119814 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:26:35,404 p=119814 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:26:35,914 p=119814 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:26:35,929 p=119814 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 10:26:36,746 p=119814 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:26:36,762 p=119814 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 10:26:37,237 p=119814 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:26:37,243 p=119814 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 10:26:37,709 p=119814 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: Destination directory /data/ai/secret-management/vault/config does not exist
Origin: /data/develop/git/installer/roles/deploy_secret_management/tasks/main.yml:20:3

18     mode: '0644'
19
20 - name: Template config file
     ^ column 3


2026-01-24 10:26:37,712 p=119814 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "checksum": "4fd5089a53ee5b58509129a3e806bf9fe8f3c3cc", "msg": "Destination directory /data/ai/secret-management/vault/config does not exist"}
2026-01-24 10:26:37,715 p=119814 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:26:37,716 p=119814 u=root n=ansible INFO| ai-server-01               : ok=4    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-24 10:27:14,333 p=121767 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:27:14,347 p=121767 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:27:25,586 p=121767 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:25,595 p=121767 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:27:26,083 p=121767 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:26,097 p=121767 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 10:27:26,754 p=121767 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:26,761 p=121767 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 10:27:27,258 p=121767 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:27,278 p=121767 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 10:27:27,650 p=121767 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:27:27,669 p=121767 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 10:27:28,467 p=121767 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:27:28,473 p=121767 u=root n=ansible INFO| TASK [deploy_secret_management : Load docker images] ****************************************************************
2026-01-24 10:27:28,495 p=121767 u=root n=ansible ERROR| [ERROR]: Could not find or access '/data/develop/git/installer/load-docker-images.yml' on the Ansible Controller: Unable to retrieve file contents.
Could not find or access '/data/develop/git/installer/load-docker-images.yml' on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option: [Errno 2] No such file or directory: '/data/develop/git/installer/load-docker-images.yml'


2026-01-24 10:27:28,496 p=121767 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "include": "load-docker-images.yml", "reason": "Could not find or access '/data/develop/git/installer/load-docker-images.yml' on the Ansible Controller: Unable to retrieve file contents.\nCould not find or access '/data/develop/git/installer/load-docker-images.yml' on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option: [Errno 2] No such file or directory: '/data/develop/git/installer/load-docker-images.yml'"}
2026-01-24 10:27:28,497 p=121767 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:27:28,497 p=121767 u=root n=ansible INFO| ai-server-01               : ok=6    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-24 10:27:32,564 p=122540 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:27:32,572 p=122540 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:27:43,787 p=122540 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:43,804 p=122540 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:27:44,296 p=122540 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:44,302 p=122540 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 10:27:44,941 p=122540 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:44,951 p=122540 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 10:27:45,387 p=122540 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:45,396 p=122540 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 10:27:45,630 p=122540 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:45,636 p=122540 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 10:27:46,071 p=122540 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:27:46,082 p=122540 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:27:46,082 p=122540 u=root n=ansible INFO| ai-server-01               : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 10:29:15,130 p=126613 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:29:15,137 p=126613 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:29:26,733 p=126613 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:29:26,741 p=126613 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:29:27,191 p=126613 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:29:27,206 p=126613 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 10:29:27,994 p=126613 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:29:28,009 p=126613 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 10:29:28,460 p=126613 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:29:28,475 p=126613 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 10:29:28,737 p=126613 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:29:28,752 p=126613 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 10:29:29,254 p=126613 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:29:29,274 p=126613 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:29:29,274 p=126613 u=root n=ansible INFO| ai-server-01               : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 10:30:32,972 p=129592 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:30:32,983 p=129592 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:30:44,522 p=129592 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:30:44,526 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:30:45,011 p=129592 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:30:45,031 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 10:30:45,823 p=129592 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:30:45,840 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 10:30:46,352 p=129592 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:30:46,368 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 10:30:46,691 p=129592 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:30:46,706 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 10:30:47,219 p=129592 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:30:47,226 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management] **********************************************************
2026-01-24 10:30:47,249 p=129592 u=root n=ansible INFO| included: /data/develop/git/installer/roles/deploy_secret_management/tasks/secret-management-docker-deploy.yml for ai-server-01
2026-01-24 10:30:47,255 p=129592 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management with Docker Compose] **************************************
2026-01-24 10:30:47,685 p=129592 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: non-zero return code
Origin: /data/develop/git/installer/roles/deploy_secret_management/tasks/secret-management-docker-deploy.yml:2:3

1 ---
2 - name: Deploy Secret Management with Docker Compose
    ^ column 3


2026-01-24 10:30:47,687 p=129592 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": true, "cmd": "docker-compose up -d --force-recreate --remove-orphans", "delta": "0:00:00.001506", "end": "2026-01-24 07:00:51.205599", "msg": "non-zero return code", "rc": 127, "start": "2026-01-24 07:00:51.204093", "stderr": "/bin/sh: 1: docker-compose: not found", "stderr_lines": ["/bin/sh: 1: docker-compose: not found"], "stdout": "", "stdout_lines": []}
2026-01-24 10:30:47,690 p=129592 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:30:47,691 p=129592 u=root n=ansible INFO| ai-server-01               : ok=7    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-24 10:33:09,784 p=135413 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 10:33:09,795 p=135413 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 10:33:22,342 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:22,347 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 10:33:22,789 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:22,800 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 10:33:23,439 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:23,446 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 10:33:23,945 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:23,959 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 10:33:24,238 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:24,249 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 10:33:24,675 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:24,680 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management] **********************************************************
2026-01-24 10:33:24,703 p=135413 u=root n=ansible INFO| included: /data/develop/git/installer/roles/deploy_secret_management/tasks/secret-management-docker-deploy.yml for ai-server-01
2026-01-24 10:33:24,708 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management with Docker Compose] **************************************
2026-01-24 10:33:25,491 p=135413 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 10:33:25,503 p=135413 u=root n=ansible INFO| TASK [deploy_secret_management : Wait for containers to initialize] *************************************************
2026-01-24 10:33:25,523 p=135413 u=root n=ansible INFO| Pausing for 30 seconds
2026-01-24 10:33:25,526 p=135413 u=root n=ansible INFO| (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2026-01-24 10:33:55,536 p=135413 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 10:33:55,556 p=135413 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 10:33:55,558 p=135413 u=root n=ansible INFO| ai-server-01               : ok=9    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 11:13:39,778 p=224394 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 11:13:39,786 p=224394 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 11:13:51,512 p=224394 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:13:51,518 p=224394 u=root n=ansible INFO| TASK [configure_docker : Create smart-analyzer network] *************************************************************
2026-01-24 11:13:52,184 p=224394 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:13:52,195 p=224394 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 11:13:52,196 p=224394 u=root n=ansible INFO| ai-server-01               : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 11:15:26,059 p=228275 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 11:15:26,071 p=228275 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 11:15:38,809 p=228275 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:15:38,815 p=228275 u=root n=ansible INFO| TASK [configure_docker : Create smart-analyzer network] *************************************************************
2026-01-24 11:15:39,468 p=228275 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:15:39,502 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 11:15:40,015 p=228275 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:15:40,022 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 11:15:40,869 p=228275 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:15:40,878 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 11:15:41,335 p=228275 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:15:41,354 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 11:15:41,685 p=228275 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:15:41,716 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 11:15:42,333 p=228275 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:15:42,351 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management] **********************************************************
2026-01-24 11:15:42,430 p=228275 u=root n=ansible INFO| included: /data/develop/git/installer/roles/deploy_secret_management/tasks/secret-management-docker-deploy.yml for ai-server-01
2026-01-24 11:15:42,446 p=228275 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management with Docker Compose] **************************************
2026-01-24 11:15:43,091 p=228275 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: non-zero return code
Origin: /data/develop/git/installer/roles/deploy_secret_management/tasks/secret-management-docker-deploy.yml:2:3

1 ---
2 - name: Deploy Secret Management with Docker Compose
    ^ column 3


2026-01-24 11:15:43,093 p=228275 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": true, "cmd": "docker compose up -d --force-recreate --remove-orphans", "delta": "0:00:00.046171", "end": "2026-01-24 07:45:46.605669", "msg": "non-zero return code", "rc": 1, "start": "2026-01-24 07:45:46.559498", "stderr": "network ai-infrastructure-network declared as external, but could not be found", "stderr_lines": ["network ai-infrastructure-network declared as external, but could not be found"], "stdout": "", "stdout_lines": []}
2026-01-24 11:15:43,095 p=228275 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 11:15:43,095 p=228275 u=root n=ansible INFO| ai-server-01               : ok=8    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2026-01-24 11:16:36,924 p=230988 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 11:16:36,940 p=230988 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 11:16:48,171 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:16:48,177 p=230988 u=root n=ansible INFO| TASK [configure_docker : Create smart-analyzer network] *************************************************************
2026-01-24 11:16:48,843 p=230988 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:16:48,856 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure deployment directory exists] ************************************************
2026-01-24 11:16:49,350 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:16:49,359 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Template docker-compose file] ******************************************************
2026-01-24 11:16:49,992 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:16:49,998 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Template .env file] ****************************************************************
2026-01-24 11:16:50,453 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:16:50,460 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Ensure config directory exists] ****************************************************
2026-01-24 11:16:50,712 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:16:50,718 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Template config file] **************************************************************
2026-01-24 11:16:51,126 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:16:51,131 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management] **********************************************************
2026-01-24 11:16:51,162 p=230988 u=root n=ansible INFO| included: /data/develop/git/installer/roles/deploy_secret_management/tasks/secret-management-docker-deploy.yml for ai-server-01
2026-01-24 11:16:51,166 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Deploy Secret Management with Docker Compose] **************************************
2026-01-24 11:16:51,995 p=230988 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:16:52,004 p=230988 u=root n=ansible INFO| TASK [deploy_secret_management : Wait for containers to initialize] *************************************************
2026-01-24 11:16:52,026 p=230988 u=root n=ansible INFO| Pausing for 30 seconds
2026-01-24 11:16:52,028 p=230988 u=root n=ansible INFO| (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2026-01-24 11:17:22,037 p=230988 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:17:22,057 p=230988 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 11:17:22,058 p=230988 u=root n=ansible INFO| ai-server-01               : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 11:17:41,473 p=233425 u=root n=ansible ERROR| [ERROR]: conflicting action statements: community.docker.docker_container, debug
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:65:3

63   include_tasks: load-docker-images.yml
64
65 - name: Run seed_prompts.py inside Docker
     ^ column 3


2026-01-24 11:18:02,925 p=234292 u=root n=ansible ERROR| [ERROR]: conflicting action statements: community.docker.docker_container, debug
Origin: /data/develop/git/installer/roles/deploy_smart_analyzer/tasks/main.yml:65:3

63   include_tasks: load-docker-images.yml
64
65 - name: Run seed_prompts.py inside Docker
     ^ column 3


2026-01-24 11:19:01,049 p=236466 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 11:19:01,058 p=236466 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 11:19:13,628 p=236466 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:19:13,633 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-24 11:19:14,058 p=236466 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:19:14,068 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-24 11:19:14,348 p=236466 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:19:14,362 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-24 11:19:14,622 p=236466 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:19:14,640 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-24 11:19:14,894 p=236466 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:19:14,909 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-24 11:19:15,174 p=236466 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:19:15,179 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-24 11:19:15,963 p=236466 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:19:15,968 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-24 11:19:16,496 p=236466 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:19:16,502 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-24 11:19:16,844 p=236466 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:19:16,861 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-24 11:19:17,359 p=236466 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:19:17,375 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-24 11:19:17,885 p=236466 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:19:17,896 p=236466 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Display deployment information] *******************************************************
2026-01-24 11:19:17,921 p=236466 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Smart Analyzer has been deployed successfully!",
        "AI Service is accessible at: http://172.25.7.99:2181",
        "Qdrant is accessible at: http://172.25.7.99:6333",
        "HAProxy is accessible at: http://172.25.7.99:5002"
    ]
}
2026-01-24 11:19:17,926 p=236466 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 11:19:17,926 p=236466 u=root n=ansible INFO| ai-server-01               : ok=12   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 11:22:08,378 p=243578 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 11:22:08,386 p=243578 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 11:22:20,897 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:20,904 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure deployment directory exists] ***************************************************
2026-01-24 11:22:21,336 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:21,352 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure prompts directory exists] ******************************************************
2026-01-24 11:22:21,637 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:21,652 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure qdrant storage directory exists] ***********************************************
2026-01-24 11:22:21,922 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:21,928 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure models directory exists] *******************************************************
2026-01-24 11:22:22,184 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:22,201 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Ensure haproxy config directory exists] ***********************************************
2026-01-24 11:22:22,493 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:22,512 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Copy haproxy configuration files] *****************************************************
2026-01-24 11:22:23,117 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:23,131 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create smart-analyzer network] ********************************************************
2026-01-24 11:22:23,728 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:23,736 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Create esnet network] *****************************************************************
2026-01-24 11:22:24,068 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:24,081 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template docker-compose file] *********************************************************
2026-01-24 11:22:24,716 p=243578 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-24 11:22:24,722 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Template .env file] *******************************************************************
2026-01-24 11:22:25,256 p=243578 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-24 11:22:25,275 p=243578 u=root n=ansible INFO| TASK [deploy_smart_analyzer : Display deployment information] *******************************************************
2026-01-24 11:22:25,305 p=243578 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Smart Analyzer has been deployed successfully!",
        "AI Service is accessible at: http://172.25.7.99:2181",
        "Qdrant is accessible at: http://172.25.7.99:6333",
        "HAProxy is accessible at: http://172.25.7.99:5002"
    ]
}
2026-01-24 11:22:25,311 p=243578 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 11:22:25,311 p=243578 u=root n=ansible INFO| ai-server-01               : ok=12   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 14:58:45,574 p=720110 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-24 14:58:45,584 p=720110 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-24 14:58:51,185 p=720110 u=root n=ansible ERROR| [ERROR]: Task failed: Failed to connect to the host via ssh: Connection closed by 172.25.7.101 port 22

2026-01-24 14:58:51,186 p=720110 u=root n=ansible INFO| fatal: [l40s-ai-01]: UNREACHABLE! => {"changed": false, "msg": "Task failed: Failed to connect to the host via ssh: Connection closed by 172.25.7.101 port 22", "unreachable": true}
2026-01-24 14:58:55,638 p=720110 u=root n=ansible ERROR| [ERROR]: Task failed: Failed to connect to the host via ssh: Connection timed out during banner exchange
Connection to 172.25.7.99 port 22 timed out


2026-01-24 14:58:55,641 p=720110 u=root n=ansible INFO| fatal: [rtx5090-ai-01]: UNREACHABLE! => {"changed": false, "msg": "Task failed: Failed to connect to the host via ssh: Connection timed out during banner exchange\r\nConnection to 172.25.7.99 port 22 timed out", "unreachable": true}
2026-01-24 14:58:55,644 p=720110 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-24 14:58:55,645 p=720110 u=root n=ansible INFO| l40s-ai-01                 : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 14:58:55,645 p=720110 u=root n=ansible INFO| rtx5090-ai-01              : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2026-01-24 14:59:49,678 p=722654 u=root n=ansible ERROR| [ERROR]: YAML parsing failed: While scanning for the next token found character that cannot start any token.
Origin: /data/develop/git/installer/main-playbook.yml:130:12

128           - "IP Address: {{ ansible_default_ipv4.address }}"
129           - ""
130           {% if has_gpu | default(false) %}
               ^ column 12


2026-01-24 14:59:57,852 p=722966 u=root n=ansible ERROR| [ERROR]: the role 'Save deployment manifest' was not found in /data/develop/git/installer/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/data/develop/git/installer
Origin: /data/develop/git/installer/main-playbook.yml:121:7

119
120
121     - name: Save deployment manifest
          ^ column 7


2026-01-24 15:00:06,735 p=723426 u=root n=ansible ERROR| [ERROR]: 'group_names' is undefined
Origin: /data/develop/git/installer/main-playbook.yml:20:15

18   vars_prompt:
19     - name: confirm_deployment
20       prompt: |
                 ^ column 15


2026-01-24 15:20:24,575 p=768527 u=root n=ansible WARNING| [WARNING]: Failed to parse inventory with 'auto' plugin: no root 'plugin' key found, '/data/develop/git/installer/inventory.yml' is not a valid YAML inventory plugin config file

Failed to parse inventory with 'auto' plugin.

<<< caused by >>>

no root 'plugin' key found, '/data/develop/git/installer/inventory.yml' is not a valid YAML inventory plugin config file
Origin: <inventory plugin 'auto' with source '/data/develop/git/installer/inventory.yml'>


2026-01-24 15:20:24,575 p=768527 u=root n=ansible WARNING| [WARNING]: Failed to parse inventory with 'yaml' plugin: Invalid "children" entry for "prod_gpu" group, requires a dictionary, found "<class 'ansible.module_utils._internal._datatag._AnsibleTaggedList'>" instead.

Failed to parse inventory with 'yaml' plugin.

<<< caused by >>>

Invalid "children" entry for "prod_gpu" group, requires a dictionary, found "<class 'ansible.module_utils._internal._datatag._AnsibleTaggedList'>" instead.
Origin: <inventory plugin 'yaml' with source '/data/develop/git/installer/inventory.yml'>


2026-01-24 15:20:24,576 p=768527 u=root n=ansible WARNING| [WARNING]: Failed to parse inventory with 'ini' plugin: Failed to parse inventory: Invalid host pattern '---' supplied, '---' is normally a sign this is a YAML file.

Failed to parse inventory with 'ini' plugin.

<<< caused by >>>

Failed to parse inventory: Invalid host pattern '---' supplied, '---' is normally a sign this is a YAML file.
Origin: /data/develop/git/installer/inventory.yml


2026-01-24 15:20:24,576 p=768527 u=root n=ansible WARNING| [WARNING]: Unable to parse /data/develop/git/installer/inventory.yml as an inventory source

2026-01-24 15:20:24,576 p=768527 u=root n=ansible WARNING| [WARNING]: No inventory was parsed, only implicit localhost is available

2026-01-24 15:20:52,715 p=768527 u=root n=ansible ERROR| [ERROR]: User interrupted execution

2026-01-24 15:21:23,334 p=770757 u=root n=ansible WARNING| [WARNING]: Failed to parse inventory with 'auto' plugin: no root 'plugin' key found, '/data/develop/git/installer/inventory.yml' is not a valid YAML inventory plugin config file

Failed to parse inventory with 'auto' plugin.

<<< caused by >>>

no root 'plugin' key found, '/data/develop/git/installer/inventory.yml' is not a valid YAML inventory plugin config file
Origin: <inventory plugin 'auto' with source '/data/develop/git/installer/inventory.yml'>


2026-01-24 15:21:23,334 p=770757 u=root n=ansible WARNING| [WARNING]: Failed to parse inventory with 'yaml' plugin: Invalid "children" entry for "prod_gpu" group, requires a dictionary, found "<class 'ansible.module_utils._internal._datatag._AnsibleTaggedList'>" instead.

Failed to parse inventory with 'yaml' plugin.

<<< caused by >>>

Invalid "children" entry for "prod_gpu" group, requires a dictionary, found "<class 'ansible.module_utils._internal._datatag._AnsibleTaggedList'>" instead.
Origin: <inventory plugin 'yaml' with source '/data/develop/git/installer/inventory.yml'>


2026-01-24 15:21:23,334 p=770757 u=root n=ansible WARNING| [WARNING]: Failed to parse inventory with 'ini' plugin: Failed to parse inventory: Invalid host pattern '---' supplied, '---' is normally a sign this is a YAML file.

Failed to parse inventory with 'ini' plugin.

<<< caused by >>>

Failed to parse inventory: Invalid host pattern '---' supplied, '---' is normally a sign this is a YAML file.
Origin: /data/develop/git/installer/inventory.yml


2026-01-24 15:21:23,334 p=770757 u=root n=ansible WARNING| [WARNING]: Unable to parse /data/develop/git/installer/inventory.yml as an inventory source

2026-01-24 15:21:23,334 p=770757 u=root n=ansible WARNING| [WARNING]: No inventory was parsed, only implicit localhost is available

2026-01-24 15:21:24,913 p=770757 u=root n=ansible ERROR| [ERROR]: User interrupted execution

2026-01-25 14:54:10,342 p=3236747 u=root n=ansible WARNING| [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2026-01-25 14:54:10,549 p=3236747 u=root n=ansible ERROR| [ERROR]: the role 'install_gpu_hardware' was not found in /data/develop/git/installer/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/data/develop/git/installer
Origin: /data/develop/git/installer/main-playbook.yml:14:7

12     # - deploy_soar_platform
13     - detect_gpu_hardware
14     - install_gpu_hardware
         ^ column 7


2026-01-25 14:54:23,989 p=3237083 u=root n=ansible WARNING| [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2026-01-25 14:54:24,189 p=3237083 u=root n=ansible ERROR| [ERROR]: the role 'install_gpu_hardware' was not found in /data/develop/git/installer/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/data/develop/git/installer
Origin: /data/develop/git/installer/main-playbook.yml:14:9

12     # - deploy_soar_platform
13       - detect_gpu_hardware
14       - install_gpu_hardware
           ^ column 9


2026-01-25 14:54:48,606 p=3237664 u=root n=ansible WARNING| [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2026-01-25 14:54:48,822 p=3237664 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 14:54:48,822 p=3237664 u=root n=ansible INFO| skipping: no hosts matched
2026-01-25 14:54:48,822 p=3237664 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 14:54:58,594 p=3237972 u=root n=ansible WARNING| [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2026-01-25 14:54:58,765 p=3237972 u=root n=ansible ERROR| [ERROR]: the role 'pre_checks' was not found in /data/develop/git/installer/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/data/develop/git/installer
Origin: /data/develop/git/installer/main-playbook.yml:6:7

4   roles:
5     - detect_gpu_hardware
6     - pre_checks
        ^ column 7


2026-01-25 14:55:29,437 p=3238724 u=root n=ansible WARNING| [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2026-01-25 14:55:29,672 p=3238724 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 14:55:29,673 p=3238724 u=root n=ansible INFO| skipping: no hosts matched
2026-01-25 14:55:29,673 p=3238724 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 14:56:07,055 p=3239550 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 14:56:07,066 p=3239550 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 14:56:09,818 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:09,828 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 14:56:10,256 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:10,311 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 14:56:10,330 p=3239550 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:56:10,337 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 14:56:10,664 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:10,670 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 14:56:10,917 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:10,932 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 14:56:11,235 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:11,243 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 14:56:11,544 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:11,558 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 14:56:11,645 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:11,651 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 14:56:11,673 p=3239550 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 14:56:11,678 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 14:56:11,741 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:11,746 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 14:56:12,045 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,051 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 14:56:12,115 p=3239550 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:56:12,121 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 14:56:12,189 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,194 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 14:56:12,258 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,265 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 14:56:12,291 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,296 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 14:56:12,322 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,328 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 14:56:12,621 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,633 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 14:56:12,697 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,702 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 14:56:12,717 p=3239550 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:56:12,722 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 14:56:12,783 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:12,788 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 14:56:13,105 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:13,113 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 14:56:13,202 p=3239550 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:56:13,209 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 14:56:14,046 p=3239550 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 14:56:14,056 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 14:56:14,133 p=3239550 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 14:56:14,144 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 14:56:14,160 p=3239550 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:56:14,165 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 14:56:14,232 p=3239550 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 14:56:14,238 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 14:56:14,755 p=3239550 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 14:56:14,760 p=3239550 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 14:56:14,783 p=3239550 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 14:56:14,790 p=3239550 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 14:56:14,791 p=3239550 u=root n=ansible INFO| ai-server-01               : ok=24   changed=2    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2026-01-25 14:57:37,654 p=3241650 u=root n=ansible ERROR| [ERROR]: the role 'install_gpu_hardware' was not found in /data/develop/git/installer/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/data/develop/git/installer
Origin: /data/develop/git/installer/main-playbook.yml:14:7

12     # - deploy_soar_platform
13     - detect_gpu_hardware
14     - install_gpu_hardware
         ^ column 7


2026-01-25 14:58:07,068 p=3242301 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************************************************************************************************************************************
2026-01-25 14:58:07,083 p=3242301 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
2026-01-25 14:58:08,826 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:08,834 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************************************************************************************************************************************
2026-01-25 14:58:09,323 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:09,356 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************************************************************************************************************************************
2026-01-25 14:58:09,377 p=3242301 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:58:09,382 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************************************************************************************************************************************
2026-01-25 14:58:09,683 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:09,690 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************************************************************************************************************************************
2026-01-25 14:58:09,943 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:09,953 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************************************************************************************************************************************
2026-01-25 14:58:10,221 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:10,227 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************************************************************************************************************************************
2026-01-25 14:58:10,523 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:10,536 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************************************************************************************************************************************
2026-01-25 14:58:10,610 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:10,618 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************************************************************************************************************************************
2026-01-25 14:58:10,641 p=3242301 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 14:58:10,646 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************************************************************************************************************************************
2026-01-25 14:58:10,711 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:10,717 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************************************************************************************************************************************
2026-01-25 14:58:10,996 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,002 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************************************************************************************************************************************
2026-01-25 14:58:11,066 p=3242301 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:58:11,073 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************************************************************************************************************************************
2026-01-25 14:58:11,144 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,149 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************************************************************************************************************************************
2026-01-25 14:58:11,219 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,225 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************************************************************************************************************************************
2026-01-25 14:58:11,252 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,260 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************************************************************************************************************************************
2026-01-25 14:58:11,286 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,293 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************************************************************************************************************************************
2026-01-25 14:58:11,585 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,603 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************************************************************************************************************************************
2026-01-25 14:58:11,677 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,683 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************************************************************************************************************************************
2026-01-25 14:58:11,698 p=3242301 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:58:11,704 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************************************************************************************************************************************
2026-01-25 14:58:11,769 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:11,775 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************************************************************************************************************************************
2026-01-25 14:58:12,065 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:12,074 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************************************************************************************************************************************
2026-01-25 14:58:12,153 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:12,161 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************************************************************************************************************************************
2026-01-25 14:58:13,009 p=3242301 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 14:58:13,017 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************************************************************************************************************************************
2026-01-25 14:58:13,099 p=3242301 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 14:58:13,111 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************************************************************************************************************************************
2026-01-25 14:58:13,131 p=3242301 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 14:58:13,138 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************************************************************************************************************************************
2026-01-25 14:58:13,210 p=3242301 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 14:58:13,218 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************************************************************************************************************************************
2026-01-25 14:58:13,996 p=3242301 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 14:58:14,009 p=3242301 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************************************************************************************************************************************
2026-01-25 14:58:14,037 p=3242301 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 14:58:14,053 p=3242301 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************************************************************************************************************************************
2026-01-25 14:58:14,122 p=3242301 u=root n=ansible ERROR| [ERROR]: Task failed: Syntax error in expression: No filter named 'stat'.

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:9:3

7 # =============================================================================
8
9 - name: Include GPU detection facts if available
    ^ column 3

<<< caused by >>>

Syntax error in expression: No filter named 'stat'.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:13:9

11     file: "{{ gpu_facts_file }}"
12     name: gpu_facts
13   when: gpu_facts_file is defined and (gpu_facts_file | stat).stat.exists | default(false)
           ^ column 9


2026-01-25 14:58:14,125 p=3242301 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: Syntax error in expression: No filter named 'stat'."}
2026-01-25 14:58:14,126 p=3242301 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************************************************************************************************************************************
2026-01-25 14:58:14,126 p=3242301 u=root n=ansible INFO| ai-server-01               : ok=24   changed=1    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
2026-01-25 15:04:25,209 p=3250531 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************************************************************************************************************************************
2026-01-25 15:04:25,224 p=3250531 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
2026-01-25 15:04:27,956 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:27,962 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************************************************************************************************************************************
2026-01-25 15:04:28,395 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:28,430 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************************************************************************************************************************************
2026-01-25 15:04:28,447 p=3250531 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:04:28,453 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************************************************************************************************************************************
2026-01-25 15:04:28,742 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:28,748 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************************************************************************************************************************************
2026-01-25 15:04:29,003 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:29,013 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************************************************************************************************************************************
2026-01-25 15:04:29,302 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:29,320 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************************************************************************************************************************************
2026-01-25 15:04:29,614 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:29,630 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************************************************************************************************************************************
2026-01-25 15:04:29,703 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:29,711 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************************************************************************************************************************************
2026-01-25 15:04:29,737 p=3250531 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 15:04:29,743 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************************************************************************************************************************************
2026-01-25 15:04:29,815 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:29,822 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************************************************************************************************************************************
2026-01-25 15:04:30,135 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,153 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************************************************************************************************************************************
2026-01-25 15:04:30,224 p=3250531 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:04:30,230 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************************************************************************************************************************************
2026-01-25 15:04:30,295 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,301 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************************************************************************************************************************************
2026-01-25 15:04:30,367 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,372 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************************************************************************************************************************************
2026-01-25 15:04:30,400 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,407 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************************************************************************************************************************************
2026-01-25 15:04:30,433 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,440 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************************************************************************************************************************************
2026-01-25 15:04:30,729 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,737 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************************************************************************************************************************************
2026-01-25 15:04:30,811 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,817 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************************************************************************************************************************************
2026-01-25 15:04:30,835 p=3250531 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:04:30,841 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************************************************************************************************************************************
2026-01-25 15:04:30,907 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:30,913 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************************************************************************************************************************************
2026-01-25 15:04:31,198 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:31,206 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************************************************************************************************************************************
2026-01-25 15:04:31,283 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:31,290 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************************************************************************************************************************************
2026-01-25 15:04:32,105 p=3250531 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:04:32,114 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************************************************************************************************************************************
2026-01-25 15:04:32,194 p=3250531 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 15:04:32,200 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************************************************************************************************************************************
2026-01-25 15:04:32,215 p=3250531 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:04:32,221 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************************************************************************************************************************************
2026-01-25 15:04:32,288 p=3250531 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 15:04:32,295 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************************************************************************************************************************************
2026-01-25 15:04:33,023 p=3250531 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 15:04:33,036 p=3250531 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************************************************************************************************************************************
2026-01-25 15:04:33,075 p=3250531 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 15:04:33,086 p=3250531 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************************************************************************************************************************************
2026-01-25 15:04:33,111 p=3250531 u=root n=ansible ERROR| [ERROR]: Task failed: The lookup plugin 'stat' was not found.

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:9:3

7 # =============================================================================
8
9 - name: Include GPU detection facts if available
    ^ column 3

<<< caused by >>>

The lookup plugin 'stat' was not found.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:13:9

11     file: "{{ gpu_facts_file }}"
12     name: gpu_facts
13   when: >
           ^ column 9


2026-01-25 15:04:33,111 p=3250531 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: The lookup plugin 'stat' was not found."}
2026-01-25 15:04:33,112 p=3250531 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************************************************************************************************************************************
2026-01-25 15:04:33,112 p=3250531 u=root n=ansible INFO| ai-server-01               : ok=24   changed=1    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
2026-01-25 15:05:19,455 p=3251894 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************************************************************************************************************************************
2026-01-25 15:05:19,472 p=3251894 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
2026-01-25 15:05:20,661 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:20,667 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************************************************************************************************************************************
2026-01-25 15:05:21,114 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:21,153 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************************************************************************************************************************************
2026-01-25 15:05:21,169 p=3251894 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:05:21,175 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************************************************************************************************************************************
2026-01-25 15:05:21,483 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:21,498 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************************************************************************************************************************************
2026-01-25 15:05:21,745 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:21,754 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************************************************************************************************************************************
2026-01-25 15:05:22,048 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:22,061 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************************************************************************************************************************************
2026-01-25 15:05:22,349 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:22,357 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************************************************************************************************************************************
2026-01-25 15:05:22,426 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:22,433 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************************************************************************************************************************************
2026-01-25 15:05:22,459 p=3251894 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 15:05:22,465 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************************************************************************************************************************************
2026-01-25 15:05:22,534 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:22,541 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************************************************************************************************************************************
2026-01-25 15:05:22,823 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:22,828 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************************************************************************************************************************************
2026-01-25 15:05:22,893 p=3251894 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:05:22,899 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************************************************************************************************************************************
2026-01-25 15:05:22,973 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:22,979 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************************************************************************************************************************************
2026-01-25 15:05:23,047 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,053 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************************************************************************************************************************************
2026-01-25 15:05:23,081 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,086 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************************************************************************************************************************************
2026-01-25 15:05:23,111 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,117 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************************************************************************************************************************************
2026-01-25 15:05:23,394 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,399 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************************************************************************************************************************************
2026-01-25 15:05:23,469 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,475 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************************************************************************************************************************************
2026-01-25 15:05:23,492 p=3251894 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:05:23,498 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************************************************************************************************************************************
2026-01-25 15:05:23,571 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,576 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************************************************************************************************************************************
2026-01-25 15:05:23,895 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,906 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************************************************************************************************************************************
2026-01-25 15:05:23,992 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:23,998 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************************************************************************************************************************************
2026-01-25 15:05:24,817 p=3251894 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:24,826 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************************************************************************************************************************************
2026-01-25 15:05:24,912 p=3251894 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 15:05:24,920 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************************************************************************************************************************************
2026-01-25 15:05:24,938 p=3251894 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:05:24,943 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************************************************************************************************************************************
2026-01-25 15:05:25,013 p=3251894 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 15:05:25,021 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************************************************************************************************************************************
2026-01-25 15:05:25,725 p=3251894 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 15:05:25,732 p=3251894 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************************************************************************************************************************************
2026-01-25 15:05:25,761 p=3251894 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 15:05:25,772 p=3251894 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************************************************************************************************************************************
2026-01-25 15:05:25,797 p=3251894 u=root n=ansible ERROR| [ERROR]: Task failed: Error while evaluating conditional: 'run_command' is undefined

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:9:3

7 # =============================================================================
8
9 - name: Include GPU detection facts if available
    ^ column 3

<<< caused by >>>

Error while evaluating conditional: 'run_command' is undefined
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:13:9

11     file: "{{ gpu_facts_file }}"
12     name: gpu_facts
13   when: >
           ^ column 9


2026-01-25 15:05:25,797 p=3251894 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: Error while evaluating conditional: 'run_command' is undefined"}
2026-01-25 15:05:25,798 p=3251894 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************************************************************************************************************************************
2026-01-25 15:05:25,798 p=3251894 u=root n=ansible INFO| ai-server-01               : ok=24   changed=1    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
2026-01-25 15:05:58,284 p=3252922 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************************************************************************************************************************************
2026-01-25 15:05:58,299 p=3252922 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
2026-01-25 15:05:59,700 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:05:59,710 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************************************************************************************************************************************
2026-01-25 15:06:00,155 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:00,182 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************************************************************************************************************************************
2026-01-25 15:06:00,201 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:00,208 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************************************************************************************************************************************
2026-01-25 15:06:00,536 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:00,557 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************************************************************************************************************************************
2026-01-25 15:06:00,938 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:00,958 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************************************************************************************************************************************
2026-01-25 15:06:01,375 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:01,381 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************************************************************************************************************************************
2026-01-25 15:06:01,693 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:01,702 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************************************************************************************************************************************
2026-01-25 15:06:01,771 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:01,777 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************************************************************************************************************************************
2026-01-25 15:06:01,803 p=3252922 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 15:06:01,809 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************************************************************************************************************************************
2026-01-25 15:06:01,881 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:01,888 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************************************************************************************************************************************
2026-01-25 15:06:02,209 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,225 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************************************************************************************************************************************
2026-01-25 15:06:02,298 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:02,304 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************************************************************************************************************************************
2026-01-25 15:06:02,373 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,378 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************************************************************************************************************************************
2026-01-25 15:06:02,444 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,451 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************************************************************************************************************************************
2026-01-25 15:06:02,480 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,486 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************************************************************************************************************************************
2026-01-25 15:06:02,522 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,527 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************************************************************************************************************************************
2026-01-25 15:06:02,850 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,873 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************************************************************************************************************************************
2026-01-25 15:06:02,951 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:02,957 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************************************************************************************************************************************
2026-01-25 15:06:02,974 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:02,979 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************************************************************************************************************************************
2026-01-25 15:06:03,048 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:03,055 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************************************************************************************************************************************
2026-01-25 15:06:03,349 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:03,357 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************************************************************************************************************************************
2026-01-25 15:06:03,432 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:03,440 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************************************************************************************************************************************
2026-01-25 15:06:04,281 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:04,286 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************************************************************************************************************************************
2026-01-25 15:06:04,365 p=3252922 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 15:06:04,373 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************************************************************************************************************************************
2026-01-25 15:06:04,390 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:04,395 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************************************************************************************************************************************
2026-01-25 15:06:04,467 p=3252922 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 15:06:04,474 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************************************************************************************************************************************
2026-01-25 15:06:05,234 p=3252922 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 15:06:05,250 p=3252922 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************************************************************************************************************************************
2026-01-25 15:06:05,281 p=3252922 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 15:06:05,291 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************************************************************************************************************************************
2026-01-25 15:06:06,570 p=3252922 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 15:06:06,577 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************************************************************************************************************************************
2026-01-25 15:06:06,613 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:06,619 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************************************************************************************************************************************
2026-01-25 15:06:06,642 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:06,648 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************************************************************************************************************************************
2026-01-25 15:06:06,722 p=3252922 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: 580.95.05",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 15:06:06,727 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************************************************************************************************************************************
2026-01-25 15:06:06,798 p=3252922 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:06:06,805 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************************************************************************************************************************************
2026-01-25 15:06:06,831 p=3252922 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Driver 580.95.05 already installed and meets requirements. Use force_driver_reinstall=true to reinstall."
}
2026-01-25 15:06:06,838 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************************************************************************************************************************************
2026-01-25 15:06:06,854 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:06,861 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************************************************************************************************************************************
2026-01-25 15:06:06,878 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:06,883 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Include post-installation tasks] ********************************************************************************************************************************************************************************
2026-01-25 15:06:06,903 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:06,909 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify NVIDIA driver installation] ******************************************************************************************************************************************************************************
2026-01-25 15:06:06,926 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:06,931 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Display nvidia-smi output] **************************************************************************************************************************************************************************************
2026-01-25 15:06:06,948 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:06,956 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Install nvidia-container-toolkit] *******************************************************************************************************************************************************************************
2026-01-25 15:06:07,018 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:07,024 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Configure Docker for NVIDIA runtime] ****************************************************************************************************************************************************************************
2026-01-25 15:06:07,087 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:07,093 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Test GPU with Docker] *******************************************************************************************************************************************************************************************
2026-01-25 15:06:07,151 p=3252922 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:06:07,157 p=3252922 u=root n=ansible INFO| TASK [install_gpu_drivers : Create GPU driver info file] ************************************************************************************************************************************************************************************
2026-01-25 15:06:07,307 p=3252922 u=root n=ansible ERROR| [ERROR]: Task failed: object of type 'dict' has no attribute 'stdout'

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:102:3

100   tags: ['test']
101
102 - name: Create GPU driver info file
      ^ column 3

<<< caused by >>>

object of type 'dict' has no attribute 'stdout'
Origin: /data/develop/git/installer/roles/install_gpu_drivers/templates/driver_info.txt.j2


2026-01-25 15:06:07,309 p=3252922 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: object of type 'dict' has no attribute 'stdout'"}
2026-01-25 15:06:07,312 p=3252922 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************************************************************************************************************************************
2026-01-25 15:06:07,312 p=3252922 u=root n=ansible INFO| ai-server-01               : ok=29   changed=2    unreachable=0    failed=1    skipped=13   rescued=0    ignored=0   
2026-01-25 15:25:58,964 p=3277898 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 15:25:58,977 p=3277898 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 15:26:02,849 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:02,857 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 15:26:03,331 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:03,408 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 15:26:03,429 p=3277898 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:26:03,436 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 15:26:03,828 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:03,841 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 15:26:04,188 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:04,208 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 15:26:04,567 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:04,587 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 15:26:04,964 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:04,975 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 15:26:05,058 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,065 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 15:26:05,092 p=3277898 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 15:26:05,098 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 15:26:05,170 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,176 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 15:26:05,478 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,486 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 15:26:05,556 p=3277898 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:26:05,563 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 15:26:05,639 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,646 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 15:26:05,717 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,722 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 15:26:05,755 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,760 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 15:26:05,791 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:05,797 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 15:26:06,097 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:06,117 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 15:26:06,241 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:06,250 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 15:26:06,277 p=3277898 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:26:06,286 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 15:26:06,401 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:06,416 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 15:26:06,800 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:06,810 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 15:26:06,896 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:06,902 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 15:26:07,765 p=3277898 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:26:07,784 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 15:26:07,924 p=3277898 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 15:26:07,933 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 15:26:07,950 p=3277898 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:26:07,959 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 15:26:08,042 p=3277898 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 15:26:08,048 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 15:26:08,875 p=3277898 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 15:26:08,882 p=3277898 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 15:26:08,912 p=3277898 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 15:26:08,924 p=3277898 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 15:26:08,997 p=3277898 u=root n=ansible ERROR| [ERROR]: Task failed: Syntax error in expression: No filter named 'stat'.

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:9:3

7 # =============================================================================
8
9 - name: Include GPU detection facts if available
    ^ column 3

<<< caused by >>>

Syntax error in expression: No filter named 'stat'.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:13:9

11     file: "{{ gpu_facts_file }}"
12     name: gpu_facts
13   when: gpu_facts_file is defined and (gpu_facts_file | stat).stat.exists | default(false)
           ^ column 9


2026-01-25 15:26:08,998 p=3277898 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: Syntax error in expression: No filter named 'stat'."}
2026-01-25 15:26:08,999 p=3277898 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 15:26:08,999 p=3277898 u=root n=ansible INFO| ai-server-01               : ok=24   changed=1    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
2026-01-25 15:27:43,313 p=3280377 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 15:27:43,327 p=3280377 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 15:27:46,026 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:46,033 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 15:27:46,467 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:46,505 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 15:27:46,520 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:46,527 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 15:27:46,890 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:46,904 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 15:27:47,160 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:47,176 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 15:27:47,452 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:47,464 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 15:27:47,756 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:47,768 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 15:27:47,840 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:47,846 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 15:27:47,870 p=3280377 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 15:27:47,875 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 15:27:47,942 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:47,947 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 15:27:48,279 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,288 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 15:27:48,357 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:48,363 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 15:27:48,427 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,432 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 15:27:48,496 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,502 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 15:27:48,527 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,532 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 15:27:48,561 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,567 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 15:27:48,868 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,885 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 15:27:48,958 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:48,963 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 15:27:48,979 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:48,985 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 15:27:49,055 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:49,061 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 15:27:49,373 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:49,388 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 15:27:49,463 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:49,469 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 15:27:50,285 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:50,291 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 15:27:50,365 p=3280377 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: 580.95.05",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: No",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 15:27:50,371 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 15:27:50,388 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:50,394 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 15:27:50,464 p=3280377 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "0, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:02:00.0, 32607 MiB",
        "1, NVIDIA GeForce RTX 5090, 580.95.05, 00000000:86:00.0, 32607 MiB"
    ]
}
2026-01-25 15:27:50,470 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 15:27:51,222 p=3280377 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 15:27:51,241 p=3280377 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 15:27:51,271 p=3280377 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 15:27:51,281 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 15:27:51,583 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:51,593 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 15:27:51,669 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:51,675 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 15:27:51,698 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:51,704 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 15:27:51,777 p=3280377 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: 580.95.05",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 15:27:51,782 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 15:27:51,851 p=3280377 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 15:27:51,857 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 15:27:51,884 p=3280377 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Driver 580.95.05 already installed and meets requirements. Use force_driver_reinstall=true to reinstall."
}
2026-01-25 15:27:51,890 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 15:27:51,906 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:51,911 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 15:27:51,928 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:51,933 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Include post-installation tasks] ********************************************************
2026-01-25 15:27:51,951 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:51,957 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify NVIDIA driver installation] ******************************************************
2026-01-25 15:27:51,975 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:51,981 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Display nvidia-smi output] **************************************************************
2026-01-25 15:27:51,998 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:52,004 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Install nvidia-container-toolkit] *******************************************************
2026-01-25 15:27:52,067 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:52,072 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Configure Docker for NVIDIA runtime] ****************************************************
2026-01-25 15:27:52,136 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:52,142 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Test GPU with Docker] *******************************************************************
2026-01-25 15:27:52,203 p=3280377 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 15:27:52,208 p=3280377 u=root n=ansible INFO| TASK [install_gpu_drivers : Create GPU driver info file] ************************************************************
2026-01-25 15:27:52,374 p=3280377 u=root n=ansible ERROR| [ERROR]: Task failed: object of type 'dict' has no attribute 'stdout'

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:106:3

104   tags: ['test']
105
106 - name: Create GPU driver info file
      ^ column 3

<<< caused by >>>

object of type 'dict' has no attribute 'stdout'
Origin: /data/develop/git/installer/roles/install_gpu_drivers/templates/driver_info.txt.j2


2026-01-25 15:27:52,375 p=3280377 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: object of type 'dict' has no attribute 'stdout'"}
2026-01-25 15:27:52,375 p=3280377 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 15:27:52,376 p=3280377 u=root n=ansible INFO| ai-server-01               : ok=29   changed=1    unreachable=0    failed=1    skipped=13   rescued=0    ignored=0   
2026-01-25 16:16:02,537 p=3342633 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 16:16:02,611 p=3342633 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 16:16:04,331 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:04,340 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 16:16:04,886 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:04,925 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 16:16:04,942 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:04,947 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 16:16:05,256 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:05,269 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 16:16:05,538 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:05,546 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 16:16:05,562 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:05,569 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 16:16:05,812 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:05,818 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 16:16:05,895 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:05,905 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 16:16:05,943 p=3342633 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 16:16:05,950 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 16:16:06,031 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,037 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 16:16:06,323 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,328 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 16:16:06,396 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:06,403 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 16:16:06,472 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,477 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 16:16:06,564 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,575 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 16:16:06,603 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,609 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 16:16:06,634 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,640 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 16:16:06,657 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:06,663 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 16:16:06,681 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:06,687 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 16:16:06,711 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,716 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 16:16:06,783 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:06,790 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 16:16:07,126 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:07,133 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 16:16:07,200 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:07,206 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 16:16:08,030 p=3342633 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:16:08,039 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 16:16:08,112 p=3342633 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 16:16:08,118 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 16:16:08,133 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:08,138 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 16:16:08,153 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:08,158 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 16:16:08,727 p=3342633 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:16:08,733 p=3342633 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 16:16:08,760 p=3342633 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 16:16:08,769 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 16:16:09,063 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:09,071 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 16:16:09,142 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:09,147 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 16:16:09,167 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:09,172 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 16:16:09,236 p=3342633 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 16:16:09,241 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 16:16:09,302 p=3342633 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:16:09,308 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 16:16:09,323 p=3342633 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:16:09,328 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 16:16:09,389 p=3342633 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 16:16:09,393 p=3342633 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 16:16:39,385 p=3342633 u=root n=ansible ERROR| [ERROR]: User interrupted execution

2026-01-25 16:20:00,133 p=3347733 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 16:20:00,147 p=3347733 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 16:20:02,801 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:02,814 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 16:20:03,281 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:03,319 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 16:20:03,338 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:03,345 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 16:20:03,661 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:03,669 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 16:20:03,923 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:03,929 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 16:20:03,947 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:03,953 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 16:20:04,209 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,225 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 16:20:04,294 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,299 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 16:20:04,324 p=3347733 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 16:20:04,328 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 16:20:04,400 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,407 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 16:20:04,731 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,738 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 16:20:04,801 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:04,807 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 16:20:04,875 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,880 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 16:20:04,948 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,954 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 16:20:04,981 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:04,987 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 16:20:05,015 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:05,022 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 16:20:05,039 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:05,044 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 16:20:05,060 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:05,065 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 16:20:05,091 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:05,096 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 16:20:05,158 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:05,163 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 16:20:05,510 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:05,522 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 16:20:05,601 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:05,608 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 16:20:06,421 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:06,435 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 16:20:06,523 p=3347733 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 16:20:06,528 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 16:20:06,548 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:06,554 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 16:20:06,570 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:06,576 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 16:20:07,278 p=3347733 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:20:07,295 p=3347733 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 16:20:07,332 p=3347733 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 16:20:07,342 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 16:20:07,604 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:07,610 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 16:20:07,686 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:07,691 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 16:20:07,714 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:07,720 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 16:20:07,796 p=3347733 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 16:20:07,802 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 16:20:07,872 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:07,877 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 16:20:07,893 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:07,898 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 16:20:07,942 p=3347733 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 16:20:07,946 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 16:20:09,291 p=3347733 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:20:09,297 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 16:20:11,303 p=3347733 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:20:11,312 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 16:20:11,593 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:11,598 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 16:20:11,675 p=3347733 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel']"
}
2026-01-25 16:20:11,681 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 16:20:11,744 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:11,749 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 16:20:12,006 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:12,015 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 16:20:12,037 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:12,043 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 16:20:12,060 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:12,065 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 16:20:12,357 p=3347733 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:20:12,366 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 16:20:12,395 p=3347733 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 16:20:12,400 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 16:20:12,419 p=3347733 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:20:12,425 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 16:20:12,695 p=3347733 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:20:12,702 p=3347733 u=root n=ansible INFO| TASK [install_gpu_drivers : Backup current X configuration (if exists)] *********************************************
2026-01-25 16:20:12,724 p=3347733 u=root n=ansible ERROR| [ERROR]: Task failed: Error while evaluating conditional: object of type 'dict' has no attribute 'exists'

Task failed.
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml:90:3

88     mode: '0755'
89
90 - name: Backup current X configuration (if exists)
     ^ column 3

<<< caused by >>>

Error while evaluating conditional: object of type 'dict' has no attribute 'exists'
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml:96:9

94     remote_src: true
95     mode: '0644'
96   when: ansible_stat.stat.exists
           ^ column 9


2026-01-25 16:20:12,724 p=3347733 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Task failed: Error while evaluating conditional: object of type 'dict' has no attribute 'exists'"}
2026-01-25 16:20:12,725 p=3347733 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 16:20:12,725 p=3347733 u=root n=ansible INFO| ai-server-01               : ok=34   changed=4    unreachable=0    failed=1    skipped=13   rescued=0    ignored=0   
2026-01-25 16:22:03,016 p=3350713 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 16:22:03,032 p=3350713 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 16:22:04,885 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:04,891 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 16:22:05,416 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:05,448 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 16:22:05,466 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:05,473 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 16:22:05,803 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:05,810 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 16:22:06,056 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:06,061 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 16:22:06,080 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:06,085 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 16:22:06,396 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:06,410 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 16:22:06,505 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:06,516 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 16:22:06,559 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 16:22:06,569 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 16:22:06,716 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:06,723 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 16:22:07,096 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,119 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 16:22:07,268 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:07,280 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 16:22:07,369 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,375 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 16:22:07,451 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,458 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 16:22:07,489 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,495 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 16:22:07,532 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,540 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 16:22:07,564 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:07,575 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 16:22:07,607 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:07,613 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 16:22:07,645 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,656 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 16:22:07,766 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:07,775 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 16:22:08,135 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:08,154 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 16:22:08,276 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:08,285 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 16:22:09,256 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:09,271 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 16:22:09,413 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 16:22:09,421 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 16:22:09,440 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:09,445 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 16:22:09,463 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:09,471 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 16:22:10,232 p=3350713 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:22:10,241 p=3350713 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 16:22:10,266 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 16:22:10,274 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 16:22:10,552 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:10,562 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 16:22:10,638 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:10,643 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 16:22:10,666 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:10,672 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 16:22:10,741 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 16:22:10,746 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 16:22:10,820 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:10,826 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 16:22:10,843 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:10,849 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 16:22:10,894 p=3350713 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 16:22:10,898 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 16:22:11,423 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:11,428 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 16:22:11,781 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:11,795 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 16:22:12,071 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:12,077 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 16:22:12,143 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel']"
}
2026-01-25 16:22:12,148 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 16:22:12,204 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:12,209 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 16:22:12,457 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:12,464 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 16:22:12,483 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:12,489 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 16:22:12,506 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:12,511 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 16:22:12,793 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:12,802 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 16:22:12,829 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 16:22:12,835 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 16:22:12,853 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:12,858 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 16:22:13,131 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:13,139 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Check available disk space] *************************************************************
2026-01-25 16:22:13,397 p=3350713 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:13,407 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if insufficient disk space] ********************************************************
2026-01-25 16:22:13,475 p=3350713 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:13,481 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Display pre-installation summary] *******************************************************
2026-01-25 16:22:13,509 p=3350713 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Pre-installation checks complete",
        "Nouveau driver: Not found",
        "Secure Boot: SecureBoot disabled",
        "Available disk space: 78GB",
        "Proceeding with driver installation..."
    ]
}
2026-01-25 16:22:13,513 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 16:22:13,554 p=3350713 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml for ai-server-01
2026-01-25 16:22:13,558 p=3350713 u=root n=ansible INFO| TASK [install_gpu_drivers : Add NVIDIA package signing key] *********************************************************
2026-01-25 16:22:34,393 p=3350713 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: Failed to download key at https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/3bf863cc.pub: Request failed: <urlopen error timed out>
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml:4:3

2 # Install NVIDIA drivers via APT repository
3
4 - name: Add NVIDIA package signing key
    ^ column 3


2026-01-25 16:22:34,393 p=3350713 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Failed to download key at https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/3bf863cc.pub: Request failed: <urlopen error timed out>"}
2026-01-25 16:22:34,395 p=3350713 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 16:22:34,395 p=3350713 u=root n=ansible INFO| ai-server-01               : ok=37   changed=1    unreachable=0    failed=1    skipped=14   rescued=0    ignored=0   
2026-01-25 16:22:49,377 p=3352025 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 16:22:49,395 p=3352025 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 16:22:50,614 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:50,622 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 16:22:51,092 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:51,120 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 16:22:51,137 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:51,143 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 16:22:51,523 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:51,542 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 16:22:51,881 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:51,898 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 16:22:51,923 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:51,929 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 16:22:52,294 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:52,303 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 16:22:52,374 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:52,380 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 16:22:52,407 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 16:22:52,412 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 16:22:52,488 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:52,494 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 16:22:52,818 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:52,836 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 16:22:52,977 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:52,990 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 16:22:53,088 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,095 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 16:22:53,182 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,190 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 16:22:53,224 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,230 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 16:22:53,263 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,271 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 16:22:53,291 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:53,298 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 16:22:53,322 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:53,329 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 16:22:53,361 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,370 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 16:22:53,459 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,465 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 16:22:53,765 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,777 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 16:22:53,877 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:53,891 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 16:22:54,896 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:54,919 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 16:22:55,028 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 16:22:55,035 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 16:22:55,053 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:55,058 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 16:22:55,076 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:55,082 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 16:22:55,838 p=3352025 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:22:55,847 p=3352025 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 16:22:55,876 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 16:22:55,886 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 16:22:56,166 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:56,186 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 16:22:56,262 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:56,272 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 16:22:56,296 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:56,302 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 16:22:56,374 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 16:22:56,379 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 16:22:56,449 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:56,457 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 16:22:56,475 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:56,480 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 16:22:56,526 p=3352025 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 16:22:56,530 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 16:22:57,066 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:57,072 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 16:22:57,410 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:57,418 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 16:22:57,670 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:57,677 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 16:22:57,750 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel']"
}
2026-01-25 16:22:57,756 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 16:22:57,819 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:57,826 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 16:22:58,063 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:58,072 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 16:22:58,089 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:58,093 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 16:22:58,109 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:58,114 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 16:22:58,377 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:58,389 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 16:22:58,419 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 16:22:58,425 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 16:22:58,444 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:58,450 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 16:22:58,741 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:58,760 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Check available disk space] *************************************************************
2026-01-25 16:22:59,099 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:59,121 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if insufficient disk space] ********************************************************
2026-01-25 16:22:59,326 p=3352025 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:22:59,346 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Display pre-installation summary] *******************************************************
2026-01-25 16:22:59,428 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Pre-installation checks complete",
        "Nouveau driver: Not found",
        "Secure Boot: SecureBoot disabled",
        "Available disk space: 78GB",
        "Proceeding with driver installation..."
    ]
}
2026-01-25 16:22:59,440 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 16:22:59,523 p=3352025 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml for ai-server-01
2026-01-25 16:22:59,530 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Determine driver package name] **********************************************************
2026-01-25 16:22:59,571 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:59,576 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Display selected driver package] ********************************************************
2026-01-25 16:22:59,605 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Installing driver package:  nvidia-driver-535  "
}
2026-01-25 16:22:59,610 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Search for available driver versions] ***************************************************
2026-01-25 16:22:59,925 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:22:59,944 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Display available driver versions] ******************************************************
2026-01-25 16:22:59,990 p=3352025 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": []
}
2026-01-25 16:22:59,995 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify driver package exists] ***********************************************************
2026-01-25 16:23:00,336 p=3352025 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:23:00,353 p=3352025 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if driver package not found] *******************************************************
2026-01-25 16:23:00,490 p=3352025 u=root n=ansible ERROR| [ERROR]: Task failed: Action failed: Driver package  nvidia-driver-535   not found in repositories.
Available drivers: 
Please specify a valid driver version with target_driver_version variable.

Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml:36:3

34   failed_when: false
35
36 - name: Fail if driver package not found
     ^ column 3


2026-01-25 16:23:00,491 p=3352025 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "Driver package  nvidia-driver-535   not found in repositories.\nAvailable drivers: \nPlease specify a valid driver version with target_driver_version variable.\n"}
2026-01-25 16:23:00,493 p=3352025 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 16:23:00,493 p=3352025 u=root n=ansible INFO| ai-server-01               : ok=42   changed=1    unreachable=0    failed=1    skipped=14   rescued=0    ignored=0   
2026-01-25 16:43:11,485 p=3377591 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 16:43:11,511 p=3377591 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 16:43:13,176 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:13,184 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 16:43:13,619 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:13,647 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 16:43:13,662 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:13,669 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 16:43:13,973 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:13,984 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 16:43:14,254 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:14,261 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 16:43:14,280 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:14,285 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 16:43:14,551 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:14,562 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 16:43:14,630 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:14,636 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 16:43:14,663 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 16:43:14,668 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 16:43:14,735 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:14,741 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 16:43:15,067 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,078 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 16:43:15,149 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:15,154 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 16:43:15,222 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,228 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 16:43:15,294 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,300 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 16:43:15,326 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,333 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 16:43:15,358 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,365 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 16:43:15,381 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:15,387 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 16:43:15,407 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:15,412 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 16:43:15,437 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,442 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 16:43:15,509 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,515 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 16:43:15,880 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,888 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 16:43:15,971 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:15,977 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 16:43:16,777 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:16,793 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 16:43:16,877 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 16:43:16,883 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 16:43:16,899 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:16,904 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 16:43:16,920 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:16,926 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 16:43:17,617 p=3377591 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:43:17,627 p=3377591 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 16:43:17,657 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 16:43:17,668 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 16:43:17,983 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:18,002 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 16:43:18,084 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:18,088 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 16:43:18,111 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:18,117 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 16:43:18,183 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 16:43:18,188 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 16:43:18,256 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:18,262 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 16:43:18,277 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:18,282 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 16:43:18,323 p=3377591 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 16:43:18,328 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 16:43:18,893 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:18,905 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 16:43:19,252 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:19,261 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 16:43:19,535 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:19,546 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 16:43:19,615 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel']"
}
2026-01-25 16:43:19,619 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 16:43:19,682 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:19,688 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 16:43:19,941 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:19,950 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 16:43:19,969 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:19,975 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 16:43:19,992 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:19,998 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 16:43:20,233 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:20,240 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 16:43:20,265 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 16:43:20,270 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 16:43:20,287 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:20,292 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 16:43:20,576 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:20,586 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Check available disk space] *************************************************************
2026-01-25 16:43:20,840 p=3377591 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:20,854 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if insufficient disk space] ********************************************************
2026-01-25 16:43:20,923 p=3377591 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:20,928 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Display pre-installation summary] *******************************************************
2026-01-25 16:43:20,955 p=3377591 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Pre-installation checks complete",
        "Nouveau driver: Not found",
        "Secure Boot: SecureBoot disabled",
        "Available disk space: 78GB",
        "Proceeding with driver installation..."
    ]
}
2026-01-25 16:43:20,961 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 16:43:20,999 p=3377591 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml for ai-server-01
2026-01-25 16:43:21,003 p=3377591 u=root n=ansible INFO| TASK [install_gpu_drivers : Add NVIDIA package signing key] *********************************************************
2026-01-25 16:43:38,680 p=3377591 u=root n=ansible ERROR| [ERROR]: User interrupted execution

2026-01-25 16:43:51,597 p=3378753 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 16:43:51,612 p=3378753 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 16:43:52,812 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:52,817 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 16:43:53,251 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:53,280 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 16:43:53,297 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:53,303 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 16:43:53,611 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:53,619 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 16:43:53,894 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:53,903 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 16:43:53,922 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:53,927 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 16:43:54,168 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,176 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 16:43:54,250 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,256 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 16:43:54,282 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 16:43:54,287 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 16:43:54,357 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,362 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 16:43:54,638 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,643 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 16:43:54,703 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:54,708 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 16:43:54,776 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,782 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 16:43:54,847 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,852 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 16:43:54,881 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,886 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 16:43:54,912 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,917 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 16:43:54,934 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:54,939 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 16:43:54,955 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:54,961 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 16:43:54,983 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:54,988 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 16:43:55,056 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:55,061 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 16:43:55,363 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:55,379 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 16:43:55,462 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:55,469 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 16:43:56,281 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:56,290 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 16:43:56,365 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 16:43:56,371 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 16:43:56,386 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:56,391 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 16:43:56,408 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:56,415 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 16:43:57,193 p=3378753 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:43:57,210 p=3378753 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 16:43:57,241 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 16:43:57,250 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 16:43:57,493 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:57,501 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 16:43:57,571 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:57,577 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 16:43:57,600 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:57,605 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 16:43:57,679 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 16:43:57,684 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 16:43:57,751 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:57,756 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 16:43:57,772 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:57,778 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 16:43:57,819 p=3378753 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 16:43:57,823 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 16:43:58,376 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:58,391 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 16:43:58,784 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:58,802 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 16:43:59,068 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:59,084 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 16:43:59,159 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel']"
}
2026-01-25 16:43:59,165 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 16:43:59,228 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:59,235 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 16:43:59,487 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:59,494 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 16:43:59,514 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:59,519 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 16:43:59,535 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:59,540 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 16:43:59,794 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:43:59,804 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 16:43:59,830 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 16:43:59,835 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 16:43:59,852 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:43:59,857 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 16:44:00,135 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:44:00,144 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Check available disk space] *************************************************************
2026-01-25 16:44:00,396 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:44:00,405 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if insufficient disk space] ********************************************************
2026-01-25 16:44:00,469 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:44:00,475 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display pre-installation summary] *******************************************************
2026-01-25 16:44:00,503 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Pre-installation checks complete",
        "Nouveau driver: Not found",
        "Secure Boot: SecureBoot disabled",
        "Available disk space: 78GB",
        "Proceeding with driver installation..."
    ]
}
2026-01-25 16:44:00,508 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 16:44:00,550 p=3378753 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml for ai-server-01
2026-01-25 16:44:00,554 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Determine driver package name] **********************************************************
2026-01-25 16:44:00,583 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:44:00,588 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display selected driver package] ********************************************************
2026-01-25 16:44:00,614 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Installing driver package:  nvidia-driver-535  "
}
2026-01-25 16:44:00,618 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Search for available driver versions] ***************************************************
2026-01-25 16:44:00,926 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:44:00,943 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display available driver versions] ******************************************************
2026-01-25 16:44:00,974 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "nvidia-driver-460 - Transitional package for nvidia-driver-470",
        "nvidia-driver-460-server - Transitional package for nvidia-driver-470-server",
        "nvidia-driver-465 - Transitional package for nvidia-driver-470",
        "nvidia-driver-470 - NVIDIA driver metapackage",
        "nvidia-driver-470-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-530 - Transitional package for nvidia-driver-535",
        "nvidia-driver-530-open - Transitional package for nvidia-driver-535-open",
        "nvidia-driver-535 - NVIDIA driver metapackage",
        "nvidia-driver-535-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-535-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-535-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-550 - NVIDIA Server Driver metapackage",
        "nvidia-driver-565-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-565-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-570 - NVIDIA driver metapackage",
        "nvidia-driver-570-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-570-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-570-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-580 - NVIDIA driver metapackage",
        "nvidia-driver-580-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-580-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-580-server-open - NVIDIA driver (open kernel) metapackage"
    ]
}
2026-01-25 16:44:00,980 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify driver package exists] ***********************************************************
2026-01-25 16:44:01,263 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:44:01,283 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if driver package not found] *******************************************************
2026-01-25 16:44:01,306 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:44:01,312 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Install NVIDIA driver] ******************************************************************
2026-01-25 16:46:48,827 p=3378753 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:46:48,838 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Install CUDA toolkit (if requested)] ****************************************************
2026-01-25 16:46:48,909 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:46:48,915 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation result] ************************************************************
2026-01-25 16:46:48,941 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "NVIDIA driver  nvidia-driver-535   installed successfully"
}
2026-01-25 16:46:48,947 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Include post-installation tasks] ********************************************************
2026-01-25 16:46:49,025 p=3378753 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/post_install.yml for ai-server-01
2026-01-25 16:46:49,030 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Load NVIDIA kernel modules] *************************************************************
2026-01-25 16:46:49,478 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia)
2026-01-25 16:46:49,770 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia_uvm)
2026-01-25 16:46:50,022 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia_drm)
2026-01-25 16:46:50,249 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia_modeset)
2026-01-25 16:46:50,263 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify NVIDIA modules are loaded] *******************************************************
2026-01-25 16:46:50,506 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:46:50,512 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Display loaded NVIDIA modules] **********************************************************
2026-01-25 16:46:50,535 p=3378753 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "nvidia_uvm           2158592  0",
        "nvidia_drm            139264  0",
        "nvidia_modeset       1814528  1 nvidia_drm",
        "nvidia              14376960  2 nvidia_uvm,nvidia_modeset",
        "ecc                    45056  2 ecdh_generic,nvidia",
        "video                  77824  4 asus_wmi,xe,i915,nvidia_modeset"
    ]
}
2026-01-25 16:46:50,540 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Create persistence daemon service] ******************************************************
2026-01-25 16:46:51,137 p=3378753 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 16:46:51,151 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Enable and start NVIDIA persistence daemon] *********************************************
2026-01-25 16:46:51,929 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:46:51,934 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Set GPU performance mode] ***************************************************************
2026-01-25 16:46:52,245 p=3378753 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 16:46:52,253 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Set GPU power limit (if configured)] ****************************************************
2026-01-25 16:46:52,276 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:46:52,281 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Configure GPU clocks (if specified)] ****************************************************
2026-01-25 16:46:52,301 p=3378753 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 16:46:52,306 p=3378753 u=root n=ansible INFO| TASK [install_gpu_drivers : Get final GPU status] *******************************************************************
2026-01-25 16:46:52,569 p=3378753 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: non-zero return code
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/post_install.yml:75:3

73   failed_when: false
74
75 - name: Get final GPU status
     ^ column 3


2026-01-25 16:46:52,571 p=3378753 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "cmd": ["nvidia-smi", "--query-gpu=index,name,driver_version,temperature.gpu,power.draw,clocks.gr,clocks.mem,utilization.gpu,utilization.memory", "--format=csv"], "delta": "0:00:00.006578", "end": "2026-01-25 13:16:52.505149", "msg": "non-zero return code", "rc": 18, "start": "2026-01-25 13:16:52.498571", "stderr": "", "stderr_lines": [], "stdout": "Failed to initialize NVML: Driver/library version mismatch\nNVML library version: 535.288", "stdout_lines": ["Failed to initialize NVML: Driver/library version mismatch", "NVML library version: 535.288"]}
2026-01-25 16:46:52,573 p=3378753 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 16:46:52,573 p=3378753 u=root n=ansible INFO| ai-server-01               : ok=51   changed=3    unreachable=0    failed=1    skipped=18   rescued=0    ignored=0   
2026-01-25 17:01:31,641 p=3400982 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 17:01:31,655 p=3400982 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 17:01:33,235 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:33,240 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 17:01:33,713 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:33,741 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 17:01:33,757 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:33,762 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 17:01:34,072 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:34,089 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 17:01:34,394 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:34,399 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 17:01:34,709 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:34,722 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 17:01:34,976 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:34,982 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 17:01:35,044 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,050 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 17:01:35,072 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 17:01:35,076 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 17:01:35,140 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,146 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 17:01:35,456 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,471 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 17:01:35,530 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:35,536 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 17:01:35,599 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,604 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 17:01:35,664 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,669 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 17:01:35,694 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,699 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 17:01:35,724 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:35,729 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 17:01:36,023 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:36,038 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 17:01:36,104 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:36,109 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 17:01:36,124 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:36,129 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 17:01:36,191 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:36,196 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 17:01:36,493 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:36,508 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 17:01:36,586 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:36,592 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 17:01:37,428 p=3400982 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:01:37,443 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 17:01:37,517 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Failed to initialize NVML: Driver/library version mismatch",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 17:01:37,522 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 17:01:37,538 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:37,543 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 17:01:37,611 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Failed to initialize NVML: Driver/library version mismatch",
        "NVML library version: 535.288"
    ]
}
2026-01-25 17:01:37,617 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 17:01:38,163 p=3400982 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:01:38,179 p=3400982 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 17:01:38,216 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 17:01:38,224 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 17:01:38,465 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:38,477 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 17:01:38,561 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:38,568 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 17:01:38,590 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:38,597 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 17:01:38,665 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Failed to initialize NVML: Driver/library version mismatch",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 17:01:38,670 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 17:01:38,731 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:38,737 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 17:01:38,751 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:38,756 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 17:01:38,793 p=3400982 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 17:01:38,797 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 17:01:39,316 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:39,322 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 17:01:39,690 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:39,697 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 17:01:39,986 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:40,000 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 17:01:40,069 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvidia-cfg1-535:amd64             535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA binary OpenGL/GLX configuration library', 'ii  libnvidia-common-535                 535.288.01-0ubuntu0.24.04.1             all          Shared files used by the NVIDIA libraries', 'ii  libnvidia-compute-535:amd64          535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA libcompute package', 'ii  libnvidia-decode-535:amd64           535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA Video Decoding runtime libraries', 'ii  libnvidia-egl-wayland1:amd64         1:1.1.13-1ubuntu0.1                     amd64        Wayland EGL External Platform library -- shared library', 'ii  libnvidia-encode-535:amd64           535.288.01-0ubuntu0.24.04.1             amd64        NVENC Video Encoding runtime library', 'ii  libnvidia-extra-535:amd64            535.288.01-0ubuntu0.24.04.1             amd64        Extra libraries for the NVIDIA driver', 'ii  libnvidia-fbc1-535:amd64             535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA OpenGL-based Framebuffer Capture runtime library', 'ii  libnvidia-gl-535:amd64               535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  nvidia-compute-utils-535             535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA compute utilities', 'ii  nvidia-dkms-535                      535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA DKMS package', 'ii  nvidia-driver-535                    535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA driver metapackage', 'ii  nvidia-firmware-535-535.288.01       535.288.01-0ubuntu0.24.04.1             amd64        Firmware files used by the kernel module', 'ii  nvidia-kernel-common-535             535.288.01-0ubuntu0.24.04.1             amd64        Shared files used with the kernel module', 'ii  nvidia-kernel-source-535             535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA kernel source package', \"ii  nvidia-prime                         0.8.17.2                                all          Tools to enable NVIDIA's Prime\", 'ii  nvidia-settings                      510.47.03-0ubuntu4                      amd64        Tool for configuring the NVIDIA graphics driver', 'ii  nvidia-utils-535                     535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA driver support binaries', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel', 'ii  xserver-xorg-video-nvidia-535        535.288.01-0ubuntu0.24.04.1             amd64        NVIDIA binary Xorg driver']"
}
2026-01-25 17:01:40,074 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 17:01:40,130 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:40,136 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 17:01:40,374 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:40,386 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 17:01:40,405 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:40,411 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 17:01:40,430 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:40,436 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 17:01:40,662 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:40,670 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 17:01:40,696 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 17:01:40,701 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 17:01:40,718 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:40,723 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 17:01:41,146 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:41,151 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Check available disk space] *************************************************************
2026-01-25 17:01:41,384 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:41,390 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if insufficient disk space] ********************************************************
2026-01-25 17:01:41,446 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:41,452 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Display pre-installation summary] *******************************************************
2026-01-25 17:01:41,476 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Pre-installation checks complete",
        "Nouveau driver: Not found",
        "Secure Boot: SecureBoot disabled",
        "Available disk space: 77GB",
        "Proceeding with driver installation..."
    ]
}
2026-01-25 17:01:41,481 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 17:01:41,517 p=3400982 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml for ai-server-01
2026-01-25 17:01:41,521 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Determine driver package name] **********************************************************
2026-01-25 17:01:41,550 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:41,555 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Display selected driver package] ********************************************************
2026-01-25 17:01:41,581 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Installing driver package:  nvidia-driver-535  "
}
2026-01-25 17:01:41,590 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Search for available driver versions] ***************************************************
2026-01-25 17:01:41,902 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:41,908 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Display available driver versions] ******************************************************
2026-01-25 17:01:41,934 p=3400982 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "nvidia-driver-460 - Transitional package for nvidia-driver-470",
        "nvidia-driver-460-server - Transitional package for nvidia-driver-470-server",
        "nvidia-driver-465 - Transitional package for nvidia-driver-470",
        "nvidia-driver-470 - NVIDIA driver metapackage",
        "nvidia-driver-470-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-530 - Transitional package for nvidia-driver-535",
        "nvidia-driver-530-open - Transitional package for nvidia-driver-535-open",
        "nvidia-driver-535 - NVIDIA driver metapackage",
        "nvidia-driver-535-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-535-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-535-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-550 - NVIDIA Server Driver metapackage",
        "nvidia-driver-565-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-565-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-570 - NVIDIA driver metapackage",
        "nvidia-driver-570-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-570-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-570-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-580 - NVIDIA driver metapackage",
        "nvidia-driver-580-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-580-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-580-server-open - NVIDIA driver (open kernel) metapackage"
    ]
}
2026-01-25 17:01:41,939 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify driver package exists] ***********************************************************
2026-01-25 17:01:42,220 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:42,236 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if driver package not found] *******************************************************
2026-01-25 17:01:42,257 p=3400982 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:01:42,262 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Install NVIDIA driver] ******************************************************************
2026-01-25 17:01:42,664 p=3400982 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:01:42,670 p=3400982 u=root n=ansible INFO| TASK [install_gpu_drivers : Install CUDA toolkit (if requested)] ****************************************************
2026-01-25 17:01:43,076 p=3400982 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: No package matching 'nvidia-cuda-toolkit' is available
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml:57:3

55   until: driver_install is succeeded
56
57 - name: Install CUDA toolkit (if requested)
     ^ column 3


2026-01-25 17:01:43,077 p=3400982 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "msg": "No package matching 'nvidia-cuda-toolkit' is available"}
2026-01-25 17:01:43,078 p=3400982 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 17:01:43,078 p=3400982 u=root n=ansible INFO| ai-server-01               : ok=46   changed=2    unreachable=0    failed=1    skipped=12   rescued=0    ignored=0   
2026-01-25 17:10:16,053 p=3412139 u=root n=ansible INFO| PLAY [APK AI Infrastructure Installer] ******************************************************************************
2026-01-25 17:10:16,067 p=3412139 u=root n=ansible INFO| TASK [Gathering Facts] **********************************************************************************************
2026-01-25 17:10:21,638 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:21,645 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if lspci is installed] ************************************************************
2026-01-25 17:10:22,115 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:22,178 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Install pciutils if needed] *************************************************************
2026-01-25 17:10:22,196 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:22,202 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect NVIDIA GPUs using lspci] *********************************************************
2026-01-25 17:10:22,489 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:22,495 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check if nvidia-smi is available] *******************************************************
2026-01-25 17:10:22,739 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:22,746 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get detailed GPU info from nvidia-smi (if available)] ***********************************
2026-01-25 17:10:22,767 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:22,772 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get GPU count] **************************************************************************
2026-01-25 17:10:23,021 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,028 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set GPU count fact] *********************************************************************
2026-01-25 17:10:23,102 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,107 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU count] **********************************************************************
2026-01-25 17:10:23,132 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Detected 0 NVIDIA GPU(s)"
}
2026-01-25 17:10:23,137 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Parse GPU information] ******************************************************************
2026-01-25 17:10:23,229 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,235 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Detect GPU models from lspci] ***********************************************************
2026-01-25 17:10:23,555 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,576 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set detected GPU model] *****************************************************************
2026-01-25 17:10:23,749 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:23,758 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set unknown GPU model if not detected] **************************************************
2026-01-25 17:10:23,826 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,832 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Normalize GPU model name] ***************************************************************
2026-01-25 17:10:23,899 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,905 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine GPU generation and architecture] **********************************************
2026-01-25 17:10:23,933 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,938 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine recommended driver version] ***************************************************
2026-01-25 17:10:23,967 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:23,973 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Check current NVIDIA driver version (if installed)] *************************************
2026-01-25 17:10:23,990 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:23,995 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set current driver version fact] ********************************************************
2026-01-25 17:10:24,012 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:24,018 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Set driver not installed fact] **********************************************************
2026-01-25 17:10:24,040 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:24,047 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Determine if driver installation/update needed] *****************************************
2026-01-25 17:10:24,109 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:24,115 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Get PCIe bus information] ***************************************************************
2026-01-25 17:10:24,421 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:24,435 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU inventory] *******************************************************************
2026-01-25 17:10:24,515 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:24,521 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Save GPU facts to file] *****************************************************************
2026-01-25 17:10:25,423 p=3412139 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:10:25,432 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display GPU Detection Summary] **********************************************************
2026-01-25 17:10:25,506 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Detection Summary",
        "==================================",
        "GPU Detected: Yes",
        "GPU Count: 0",
        "GPU Model: UNKNOWN",
        "GPU Generation: Unknown ",
        "Compute Capability: Unknown ",
        "Current Driver: Not Installed",
        "Recommended Driver: 535 ",
        "Driver Branch: production ",
        "Installation Needed: Yes",
        "PCI Buses: 02:00.0, 86:00.0",
        "=================================="
    ]
}
2026-01-25 17:10:25,514 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Fail if no GPU detected but required] ***************************************************
2026-01-25 17:10:25,532 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:25,537 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display detailed GPU information (if nvidia-smi available)] *****************************
2026-01-25 17:10:25,553 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:25,558 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Create GPU detection report] ************************************************************
2026-01-25 17:10:26,053 p=3412139 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:10:26,059 p=3412139 u=root n=ansible INFO| TASK [detect_gpu_hardware : Display next steps] *********************************************************************
2026-01-25 17:10:26,084 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Next Steps:",
        "1. Review GPU detection results above",
        "2. Run install_gpu_drivers role if installation is needed",
        "3. GPU facts saved to: /tmp/gpu_facts.yml",
        "4. GPU report saved to: /tmp/gpu_detection_report.txt"
    ]
}
2026-01-25 17:10:26,093 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if GPU facts file exists] *********************************************************
2026-01-25 17:10:26,363 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:26,371 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Include GPU detection facts if available] ***********************************************
2026-01-25 17:10:26,443 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:26,450 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify GPU was detected] ****************************************************************
2026-01-25 17:10:26,471 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:26,476 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation plan] **************************************************************
2026-01-25 17:10:26,553 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "==================================",
        "GPU Driver Installation Plan",
        "==================================",
        "GPU Model: UNKNOWN",
        "Current Driver: Not Installed",
        "Target Driver: 535 ",
        "Installation Method: apt",
        "=================================="
    ]
}
2026-01-25 17:10:26,558 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if installation is needed] ********************************************************
2026-01-25 17:10:26,637 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:26,684 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Skip message] ***************************************************************************
2026-01-25 17:10:26,718 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:26,724 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Include pre-installation tasks] *********************************************************
2026-01-25 17:10:26,772 p=3412139 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/pre_install.yml for ai-server-01
2026-01-25 17:10:26,777 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Update apt cache] ***********************************************************************
2026-01-25 17:10:27,290 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:27,296 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Install required packages] **************************************************************
2026-01-25 17:10:27,662 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:27,678 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for existing NVIDIA drivers] ******************************************************
2026-01-25 17:10:27,928 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:27,934 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display existing NVIDIA packages] *******************************************************
2026-01-25 17:10:28,003 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Found existing NVIDIA packages: ['ii  libaccinj64-12.0:amd64               12.0.146~12.0.1-4build4                 amd64        NVIDIA ACCINJ Library (64-bit)', 'ii  libcu++-dev                          1.9.0-3                                 all          NVIDIA C++ Standard Library', 'ii  libcublas12:amd64                    12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLAS Library', 'ii  libcublaslt12:amd64                  12.0.2.224~12.0.1-4build4               amd64        NVIDIA cuBLASLt Library', 'ii  libcudart12:amd64                    12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Runtime Library', 'ii  libcufft11:amd64                     11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFT Library', 'ii  libcufftw11:amd64                    11.0.1.95~12.0.1-4build4                amd64        NVIDIA cuFFTW Library', 'ii  libcupti-dev:amd64                   12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface development files', 'ii  libcupti-doc                         12.0.146~12.0.1-4build4                 all          NVIDIA CUDA Profiler Tools Interface documentation', 'ii  libcupti12:amd64                     12.0.146~12.0.1-4build4                 amd64        NVIDIA CUDA Profiler Tools Interface runtime library', 'ii  libcurand10:amd64                    11.1.1+~10.3.1.124~12.0.1-4build4       amd64        NVIDIA cuRAND Library', 'ii  libcusolver11:amd64                  11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVER Library', 'ii  libcusolvermg11:amd64                11.4.3.1~12.0.1-4build4                 amd64        NVIDIA cuSOLVERmg Library', 'ii  libcusparse12:amd64                  12.0.1.140~12.0.1-4build4               amd64        NVIDIA cuSPARSE Library', 'ii  libnppc12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives core runtime library', 'ii  libnppial12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Arithmetic and Logic', 'ii  libnppicc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Color Conversion', 'ii  libnppidei12:amd64                   12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Data Exchange and Initialization', 'ii  libnppif12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Filters', 'ii  libnppig12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Geometry transforms', 'ii  libnppim12:amd64                     12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Morphological operations', 'ii  libnppist12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Statistics', 'ii  libnppisu12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Support', 'ii  libnppitc12:amd64                    12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives lib for Image Threshold and Compare', 'ii  libnpps12:amd64                      12.0.1.104~12.0.1-4build4               amd64        NVIDIA Performance Primitives for signal processing runtime library', 'ii  libnvjitlink12:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Compiler JIT LTO Library', 'ii  libnvjpeg12:amd64                    12.0.1.102~12.0.1-4build4               amd64        NVIDIA JPEG library (nvJPEG)', 'ii  libnvrtc-builtins12.0:amd64          12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Builtins Library)', 'ii  libnvrtc12:amd64                     12.0.140~12.0.1-4build4                 amd64        CUDA Runtime Compilation (NVIDIA NVRTC Library)', 'ii  libnvtoolsext1:amd64                 12.0.140~12.0.1-4build4                 amd64        NVIDIA Tools Extension Library', 'ii  libnvvm4:amd64                       12.0.140~12.0.1-4build4                 amd64        NVIDIA NVVM Library', 'ii  nsight-compute                       2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute', 'ii  nsight-compute-target:amd64          2022.4.1.6~12.0.1-4build4               amd64        NVIDIA Nsight Compute (target specific libraries)', 'ii  screen-resolution-extra              0.18.3ubuntu0.24.04.1                   all          Extension for the nvidia-settings control panel']"
}
2026-01-25 17:10:28,008 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Remove existing NVIDIA drivers (if force reinstall)] ************************************
2026-01-25 17:10:28,070 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:28,076 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Check for nouveau driver] ***************************************************************
2026-01-25 17:10:28,342 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:28,348 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Blacklist nouveau driver] ***************************************************************
2026-01-25 17:10:28,365 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:28,370 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Disable nouveau in GRUB] ****************************************************************
2026-01-25 17:10:28,387 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:28,393 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Check if system supports secure boot] ***************************************************
2026-01-25 17:10:28,648 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:28,654 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display secure boot status] *************************************************************
2026-01-25 17:10:28,682 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Secure Boot Status: SecureBoot disabled"
}
2026-01-25 17:10:28,687 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Warn about secure boot] *****************************************************************
2026-01-25 17:10:28,707 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:28,713 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Create backup directory] ****************************************************************
2026-01-25 17:10:29,186 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:29,205 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Check available disk space] *************************************************************
2026-01-25 17:10:29,536 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:29,551 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if insufficient disk space] ********************************************************
2026-01-25 17:10:29,615 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:29,621 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display pre-installation summary] *******************************************************
2026-01-25 17:10:29,650 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Pre-installation checks complete",
        "Nouveau driver: Not found",
        "Secure Boot: SecureBoot disabled",
        "Available disk space: 78GB",
        "Proceeding with driver installation..."
    ]
}
2026-01-25 17:10:29,655 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Install driver based on method] *********************************************************
2026-01-25 17:10:29,691 p=3412139 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/install_apt.yml for ai-server-01
2026-01-25 17:10:29,695 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Determine driver package name] **********************************************************
2026-01-25 17:10:29,725 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:29,731 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display selected driver package] ********************************************************
2026-01-25 17:10:29,755 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "Installing driver package:  nvidia-driver-535  "
}
2026-01-25 17:10:29,761 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Search for available driver versions] ***************************************************
2026-01-25 17:10:30,168 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:30,186 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display available driver versions] ******************************************************
2026-01-25 17:10:30,252 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "nvidia-driver-460 - Transitional package for nvidia-driver-470",
        "nvidia-driver-460-server - Transitional package for nvidia-driver-470-server",
        "nvidia-driver-465 - Transitional package for nvidia-driver-470",
        "nvidia-driver-470 - NVIDIA driver metapackage",
        "nvidia-driver-470-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-530 - Transitional package for nvidia-driver-535",
        "nvidia-driver-530-open - Transitional package for nvidia-driver-535-open",
        "nvidia-driver-535 - NVIDIA driver metapackage",
        "nvidia-driver-535-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-535-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-535-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-550 - NVIDIA Server Driver metapackage",
        "nvidia-driver-565-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-565-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-570 - NVIDIA driver metapackage",
        "nvidia-driver-570-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-570-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-570-server-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-580 - NVIDIA driver metapackage",
        "nvidia-driver-580-open - NVIDIA driver (open kernel) metapackage",
        "nvidia-driver-580-server - NVIDIA Server Driver metapackage",
        "nvidia-driver-580-server-open - NVIDIA driver (open kernel) metapackage"
    ]
}
2026-01-25 17:10:30,261 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify driver package exists] ***********************************************************
2026-01-25 17:10:30,535 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:10:30,551 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Fail if driver package not found] *******************************************************
2026-01-25 17:10:30,595 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:10:30,623 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Install NVIDIA driver] ******************************************************************
2026-01-25 17:11:11,759 p=3412139 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:11:11,767 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Install CUDA toolkit (if requested)] ****************************************************
2026-01-25 17:11:11,830 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:11:11,836 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display installation result] ************************************************************
2026-01-25 17:11:11,868 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": "NVIDIA driver  nvidia-driver-535   installed successfully"
}
2026-01-25 17:11:11,872 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Include post-installation tasks] ********************************************************
2026-01-25 17:11:11,932 p=3412139 u=root n=ansible INFO| included: /data/develop/git/installer/roles/install_gpu_drivers/tasks/post_install.yml for ai-server-01
2026-01-25 17:11:11,936 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Load NVIDIA kernel modules] *************************************************************
2026-01-25 17:11:12,431 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia)
2026-01-25 17:11:12,681 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia_uvm)
2026-01-25 17:11:12,885 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia_drm)
2026-01-25 17:11:13,088 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => (item=nvidia_modeset)
2026-01-25 17:11:13,094 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify NVIDIA modules are loaded] *******************************************************
2026-01-25 17:11:13,345 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:11:13,366 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display loaded NVIDIA modules] **********************************************************
2026-01-25 17:11:13,393 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "nvidia_uvm           2158592  0",
        "nvidia_drm            139264  0",
        "nvidia_modeset       1814528  1 nvidia_drm",
        "nvidia              14376960  2 nvidia_uvm,nvidia_modeset",
        "ecc                    45056  2 ecdh_generic,nvidia",
        "video                  77824  4 asus_wmi,xe,i915,nvidia_modeset"
    ]
}
2026-01-25 17:11:13,441 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Create persistence daemon service] ******************************************************
2026-01-25 17:11:13,994 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:11:14,011 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Enable and start NVIDIA persistence daemon] *********************************************
2026-01-25 17:11:14,817 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:11:14,833 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Set GPU performance mode] ***************************************************************
2026-01-25 17:11:15,120 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:11:15,132 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Set GPU power limit (if configured)] ****************************************************
2026-01-25 17:11:15,157 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:11:15,162 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Configure GPU clocks (if specified)] ****************************************************
2026-01-25 17:11:15,184 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:11:15,190 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Get final GPU status] *******************************************************************
2026-01-25 17:11:15,434 p=3412139 u=root n=ansible INFO| ok: [ai-server-01]
2026-01-25 17:11:15,440 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display final GPU status] ***************************************************************
2026-01-25 17:11:15,467 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Failed to initialize NVML: Driver/library version mismatch",
        "NVML library version: 535.288"
    ]
}
2026-01-25 17:11:15,472 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Create nvidia-smi systemd service for monitoring] ***************************************
2026-01-25 17:11:15,588 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:11:15,593 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Create nvidia-smi timer for periodic monitoring] ****************************************
2026-01-25 17:11:15,722 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:11:15,728 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Enable monitoring timer] ****************************************************************
2026-01-25 17:11:15,845 p=3412139 u=root n=ansible INFO| skipping: [ai-server-01]
2026-01-25 17:11:15,851 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Configure automatic NVIDIA module loading on boot] **************************************
2026-01-25 17:11:16,292 p=3412139 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:11:16,308 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Update initramfs to include NVIDIA modules] *********************************************
2026-01-25 17:11:20,105 p=3412139 u=root n=ansible INFO| changed: [ai-server-01]
2026-01-25 17:11:20,122 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Display post-installation summary] ******************************************************
2026-01-25 17:11:20,257 p=3412139 u=root n=ansible INFO| ok: [ai-server-01] => {
    "msg": [
        "Post-installation configuration complete",
        "Persistence mode: Enabled",
        "Monitoring service: Skipped",
        "GPU modules loaded: 6"
    ]
}
2026-01-25 17:11:20,263 p=3412139 u=root n=ansible INFO| TASK [install_gpu_drivers : Verify NVIDIA driver installation] ******************************************************
2026-01-25 17:11:20,509 p=3412139 u=root n=ansible ERROR| [ERROR]: Task failed: Module failed: non-zero return code
Origin: /data/develop/git/installer/roles/install_gpu_drivers/tasks/main.yml:72:3

70   tags: ['post_install']
71
72 - name: Verify NVIDIA driver installation
     ^ column 3


2026-01-25 17:11:20,510 p=3412139 u=root n=ansible INFO| fatal: [ai-server-01]: FAILED! => {"changed": false, "cmd": ["nvidia-smi"], "delta": "0:00:00.006989", "end": "2026-01-25 13:41:20.462154", "msg": "non-zero return code", "rc": 18, "start": "2026-01-25 13:41:20.455165", "stderr": "", "stderr_lines": [], "stdout": "Failed to initialize NVML: Driver/library version mismatch\nNVML library version: 535.288", "stdout_lines": ["Failed to initialize NVML: Driver/library version mismatch", "NVML library version: 535.288"]}
2026-01-25 17:11:20,511 p=3412139 u=root n=ansible INFO| PLAY RECAP **********************************************************************************************************
2026-01-25 17:11:20,511 p=3412139 u=root n=ansible INFO| ai-server-01               : ok=56   changed=5    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
