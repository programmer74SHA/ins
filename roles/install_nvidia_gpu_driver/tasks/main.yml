---
# tasks file for nvidia-gpu-setup

- name: Include variable validation
  include_tasks: validate.yml

- name: Update apt cache
  apt:
    update_cache: yes
    cache_valid_time: 3600
  become: yes

- name: Detect NVIDIA GPUs
  include_tasks: detect_gpu.yml

- name: Get available NVIDIA drivers
  include_tasks: get_drivers.yml

- name: Select driver version
  include_tasks: select_driver.yml

- name: Install NVIDIA driver
  include_tasks: install_driver.yml

- name: Install CUDA toolkit
  include_tasks: install_cuda.yml

- name: Configure NVIDIA settings
  include_tasks: configure.yml

- name: Verify installation
  include_tasks: verify.yml
